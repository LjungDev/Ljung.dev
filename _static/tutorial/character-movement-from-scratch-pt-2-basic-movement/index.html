<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><title>Ljung | Character Movement from Scratch pt 2: Basic Movement</title><meta name="description" content="In this part we implement input handling and very basic movement."/><meta name="next-head-count" content="4"/><link rel="icon" href="/favicon.ico"/><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/><link rel="manifest" href="/site.webmanifest"/><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin /><link rel="preload" href="/_next/static/css/14da082a368919fc.css" as="style"/><link rel="stylesheet" href="/_next/static/css/14da082a368919fc.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-2c644d3580cecc35.js" defer=""></script><script src="/_next/static/chunks/framework-9b5d6ec4444c80fa.js" defer=""></script><script src="/_next/static/chunks/main-7c70317c243a4143.js" defer=""></script><script src="/_next/static/chunks/pages/_app-301819447092fb27.js" defer=""></script><script src="/_next/static/chunks/ddc9e94f-4c7cb313852dfa1e.js" defer=""></script><script src="/_next/static/chunks/247-2427dfe63c188f3b.js" defer=""></script><script src="/_next/static/chunks/13-1bb7831376086322.js" defer=""></script><script src="/_next/static/chunks/pages/tutorial/%5Bslug%5D-22eeb0a3910b85b8.js" defer=""></script><script src="/_next/static/FdMC6e8Jf18CHKkiz_cXU/_buildManifest.js" defer=""></script><script src="/_next/static/FdMC6e8Jf18CHKkiz_cXU/_ssgManifest.js" defer=""></script><style data-href="https://fonts.googleapis.com/css2?family=Baloo+2&family=Fira+Code&family=Open+Sans:wght@300;400;700&display=swap">@font-face{font-family:'Baloo 2';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/baloo2/v14/wXK0E3kTposypRydzVT08TS3JnAmtdgazaps.woff) format('woff')}@font-face{font-family:'Fira Code';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/firacode/v21/uU9eCBsR6Z2vfE9aq3bL0fxyUs4tcw4W_D1sFVQ.woff) format('woff')}@font-face{font-family:'Open Sans';font-style:normal;font-weight:300;font-stretch:normal;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v34/memSYaGs126MiZpBA-UvWbX2vVnXBbObj2OVZyOOSr4dVJWUgsiH0C4k.woff) format('woff')}@font-face{font-family:'Open Sans';font-style:normal;font-weight:400;font-stretch:normal;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v34/memSYaGs126MiZpBA-UvWbX2vVnXBbObj2OVZyOOSr4dVJWUgsjZ0C4k.woff) format('woff')}@font-face{font-family:'Open Sans';font-style:normal;font-weight:700;font-stretch:normal;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v34/memSYaGs126MiZpBA-UvWbX2vVnXBbObj2OVZyOOSr4dVJWUgsg-1y4k.woff) format('woff')}@font-face{font-family:'Baloo 2';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/baloo2/v14/wXK0E3kTposypRydzVT08TS3JnAmtdgazZpp_lGP6HcMqzQCjA.woff) format('woff');unicode-range:U+0900-097F,U+1CD0-1CF6,U+1CF8-1CF9,U+200C-200D,U+20A8,U+20B9,U+25CC,U+A830-A839,U+A8E0-A8FB}@font-face{font-family:'Baloo 2';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/baloo2/v14/wXK0E3kTposypRydzVT08TS3JnAmtdgazZpn_lGP6HcMqzQCjA.woff) format('woff');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Baloo 2';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/baloo2/v14/wXK0E3kTposypRydzVT08TS3JnAmtdgazZpm_lGP6HcMqzQCjA.woff) format('woff');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Baloo 2';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/baloo2/v14/wXK0E3kTposypRydzVT08TS3JnAmtdgazZpo_lGP6HcMqzQ.woff) format('woff');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Fira Code';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/firacode/v21/uU9eCBsR6Z2vfE9aq3bL0fxyUs4tcw4W_D1sJV37MOzlojwUKaJO.woff) format('woff');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Fira Code';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/firacode/v21/uU9eCBsR6Z2vfE9aq3bL0fxyUs4tcw4W_D1sJVT7MOzlojwUKaJO.woff) format('woff');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Fira Code';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/firacode/v21/uU9eCBsR6Z2vfE9aq3bL0fxyUs4tcw4W_D1sJVz7MOzlojwUKaJO.woff) format('woff');unicode-range:U+1F00-1FFF}@font-face{font-family:'Fira Code';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/firacode/v21/uU9eCBsR6Z2vfE9aq3bL0fxyUs4tcw4W_D1sJVP7MOzlojwUKaJO.woff) format('woff');unicode-range:U+0370-03FF}@font-face{font-family:'Fira Code';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/firacode/v21/uU9eCBsR6Z2vfE9aq3bL0fxyUs4tcw4W_D1sJV77MOzlojwUKaJO.woff) format('woff');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Fira Code';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/firacode/v21/uU9eCBsR6Z2vfE9aq3bL0fxyUs4tcw4W_D1sJVD7MOzlojwUKQ.woff) format('woff');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Open Sans';font-style:normal;font-weight:300;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v34/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTSKmu0SC55K5gw.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Open Sans';font-style:normal;font-weight:300;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v34/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTSumu0SC55K5gw.woff2) format('woff2');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Open Sans';font-style:normal;font-weight:300;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v34/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTSOmu0SC55K5gw.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Open Sans';font-style:normal;font-weight:300;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v34/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTSymu0SC55K5gw.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Open Sans';font-style:normal;font-weight:300;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v34/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTS2mu0SC55K5gw.woff2) format('woff2');unicode-range:U+0590-05FF,U+200C-2010,U+20AA,U+25CC,U+FB1D-FB4F}@font-face{font-family:'Open Sans';font-style:normal;font-weight:300;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v34/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTSCmu0SC55K5gw.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Open Sans';font-style:normal;font-weight:300;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v34/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTSGmu0SC55K5gw.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Open Sans';font-style:normal;font-weight:300;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v34/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTS-mu0SC55I.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Open Sans';font-style:normal;font-weight:400;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v34/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTSKmu0SC55K5gw.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Open Sans';font-style:normal;font-weight:400;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v34/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTSumu0SC55K5gw.woff2) format('woff2');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Open Sans';font-style:normal;font-weight:400;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v34/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTSOmu0SC55K5gw.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Open Sans';font-style:normal;font-weight:400;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v34/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTSymu0SC55K5gw.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Open Sans';font-style:normal;font-weight:400;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v34/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTS2mu0SC55K5gw.woff2) format('woff2');unicode-range:U+0590-05FF,U+200C-2010,U+20AA,U+25CC,U+FB1D-FB4F}@font-face{font-family:'Open Sans';font-style:normal;font-weight:400;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v34/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTSCmu0SC55K5gw.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Open Sans';font-style:normal;font-weight:400;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v34/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTSGmu0SC55K5gw.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Open Sans';font-style:normal;font-weight:400;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v34/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTS-mu0SC55I.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Open Sans';font-style:normal;font-weight:700;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v34/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTSKmu0SC55K5gw.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Open Sans';font-style:normal;font-weight:700;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v34/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTSumu0SC55K5gw.woff2) format('woff2');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Open Sans';font-style:normal;font-weight:700;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v34/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTSOmu0SC55K5gw.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Open Sans';font-style:normal;font-weight:700;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v34/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTSymu0SC55K5gw.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Open Sans';font-style:normal;font-weight:700;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v34/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTS2mu0SC55K5gw.woff2) format('woff2');unicode-range:U+0590-05FF,U+200C-2010,U+20AA,U+25CC,U+FB1D-FB4F}@font-face{font-family:'Open Sans';font-style:normal;font-weight:700;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v34/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTSCmu0SC55K5gw.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Open Sans';font-style:normal;font-weight:700;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v34/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTSGmu0SC55K5gw.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Open Sans';font-style:normal;font-weight:700;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v34/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTS-mu0SC55I.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}</style></head><body><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-M8H57QK" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div id="__next"><div class="flex flex-col min-h-screen"><div class="flex flex-col items-center grow pt-12 bg-snow-storm-2 dark:bg-polar-night-0"><div class="flex items-center gap-2"><div class="flex items-center gap-2 hover:cursor-pointer hover:opacity-75"><div class="relative w-14 h-24"><span style="box-sizing:border-box;display:block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:absolute;top:0;left:0;bottom:0;right:0"><img alt="Logo" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="fill" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:contain"/><noscript><img alt="Logo" src="/logo.svg" decoding="async" data-nimg="fill" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:contain" loading="lazy"/></noscript></span></div><div class=" flex flex-col items-center gap-1"><div class="relative"><h1 class="text-6xl font-display text-polar-night-0 dark:text-snow-storm-2">Ljung</h1><span class="absolute right-0 bottom-0.5 w-0"><span class="text-base font-display opacity-50 text-polar-night-0 dark:text-snow-storm-2"></span></span></div></div><span class="text-base font-display opacity-50 text-polar-night-0 dark:text-snow-storm-2">.dev</span></div><div class="flex gap-1 items-center font-body text-base"><a class="font-bold text-polar-night-0 dark:text-snow-storm-2" href="/tutorials/">Tutorials</a></div></div><div class="max-w-xl w-full flex flex-col gap-12 items-center mb-12"><div class="h-[1px] w-full opacity-10 bg-polar-night-0 dark:bg-snow-storm-2"></div><div class="flex flex-col gap-5 max-w-[min(100%,512px)] m-3 p-3 text-polar-night-0 dark:text-snow-storm-2 text-base font-body"><div class="flex"><div class="grow text-left"><a class="text-frost-3 dark:text-frost-1 hover:opacity-50 active:opacity-75" href="/tutorial/character-movement-from-scratch-pt-1-introduction-and-setup/">« <!-- -->pt 1: Introduction and Setup</a></div><div class="grow text-right"><a class="text-frost-3 dark:text-frost-1 hover:opacity-50 active:opacity-75" href="/tutorial/character-movement-from-scratch-pt-3-collision/">pt 3: Collision<!-- --> »</a></div></div><div><blockquote class="bg-snow-storm-0 dark:bg-polar-night-1 border-l-4 border-l-polar-night-0 dark:border-l-snow-storm-0 px-4 py-2 my-2"><p class="py-2 false">Note: Any code shown is made with Unreal Engine in mind, but the general concepts should be applicable to most 3D-engines.</p></blockquote><blockquote class="bg-snow-storm-0 dark:bg-polar-night-1 border-l-4 border-l-polar-night-0 dark:border-l-snow-storm-0 px-4 py-2 my-2"><p class="py-2 false">A project using this tutorial series is <a target="_blank" class="text-frost-3 dark:text-frost-1 hover:opacity-50 active:opacity-75" href="https://github.com/LjungDev/Cactus">tracked on GitHub</a>. The revision after this part is <a target="_blank" class="text-frost-3 dark:text-frost-1 hover:opacity-50 active:opacity-75" href="https://github.com/LjungDev/Cactus/commit/82350b1802a76d11891753d2e8c0f93f0cab6367">82350b1</a>.</p></blockquote><p class="py-2 false">Hej!</p><p class="py-2 false">In this first part of diving into the movement code, we&#x27;ll be implementing basic forward/backward/strafing movement as well as camera look. We still have some input-handling boilerplate to go through but we&#x27;ll start with just the bare minimum so no collision or gravity yet.</p><p class="py-2 false">It is fairly straightforward. The logic goes:</p><ol class="list-decimal list-inside"><li class="my-2 pl-2"><p class="py-2 inline">Grab our desired input in a format we can understand</p></li><li class="my-2 pl-2"><p class="py-2 inline">Translate that input into a direction that is relative to the player pawn&#x27;s rotation</p></li><li class="my-2 pl-2"><p class="py-2 inline">Pass the input to the movement component</p></li><li class="my-2 pl-2"><p class="py-2 inline">Consume the input in the movement component</p></li><li class="my-2 pl-2"><p class="py-2 inline">Derive a world-space delta to apply based on input and movement speed</p></li><li class="my-2 pl-2"><p class="py-2 inline">Move our player pawn by the calculated delta</p></li></ol><p class="py-2 false">The first part is probably the more complex as we have to setup our input bindings first.</p><h1 class="font-display text-4xl pt-6">Input Bindings</h1><p class="py-2 false">This section will double down as a crash course in Enhanced Input. Without going into too much detail, the main difference between Enhanced Input and a traditional input binding that you might be familiar with is that Enhanced Input takes common operations that are usually expressed in code and abstracts them into configurable objects. Things like handling raw input, deadzones, hold time, rapid firing etc. can be customized through dropdowns instead of code.</p><p class="py-2 false">You can read more about it on <a target="_blank" class="text-frost-3 dark:text-frost-1 hover:opacity-50 active:opacity-75" href="https://docs.unrealengine.com/4.26/en-US/InteractiveExperiences/Input/EnhancedInput/">the docs here</a>.</p><p class="py-2 false">An abstract action that we want to handle (&quot;move&quot;, &quot;jump&quot;, &quot;shoot&quot;) are configured as Input Action objects. The object that binds concrete input (e.g. the &quot;W&quot; key) to an action is an Input Mapping Context object. There are some extra layers to this but that is what we&#x27;re going to use in our basic scenario. </p><p class="py-2 false">We need two input actions: Move, and Look.</p><p class="py-2 false">Right-click an area of your choice in the Content Drawer and add two actions:</p><div class="flex justify-center cursor-pointer"><div style="overflow:hidden;position:relative;width:100%;max-width:528px"><img style="display:block;width:100%" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1MjgiIGhlaWdodD0iMjUyIj48L3N2Zz4=" aria-hidden="true" alt=""/><img role="presentation" aria-hidden="true" alt="" src="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAoHBwgHBgoICAgLChULDhQZGhkWDhEhEhENFxYZGBYVFiEdHy0vHSkoHRUWJDUlKC0vMjIyGSI4PTcwPCsxMi8BCgsLAg0OHBAQHDsoIigvLzs7Ozs7Oy87Oy8vLy8vLy87Oy87LzsvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL//AABEIAAwAGAMBIgACEQEDEQH/xAAYAAACAwAAAAAAAAAAAAAAAAADBgAEBf/EAB0QAAIDAAIDAAAAAAAAAAAAAAECAAMEETEFEiH/xAAWAQEBAQAAAAAAAAAAAAAAAAADBAL/xAAeEQABAwQDAAAAAAAAAAAAAAABAAZBAwQhUQIHEf/aAAwDAQACEQMRAD8AW9tiFPpg/HtX7dzN1WuU7lXHosF3AMqFXsmCPEfKi2DkhN74671kgMdzlByZJk3D12jNu2TC/9k=" style="opacity:1;transition:opacity 500ms;position:absolute;left:0;top:0;width:100%"/><noscript><picture><source srcSet="https://www.datocms-assets.com/77616/1660781073-fpmfs-pt2-input-action.png?auto=format&amp;dpr=0.25&amp;fm=webp&amp;max-w=600 132w,https://www.datocms-assets.com/77616/1660781073-fpmfs-pt2-input-action.png?auto=format&amp;dpr=0.5&amp;fm=webp&amp;max-w=600 264w,https://www.datocms-assets.com/77616/1660781073-fpmfs-pt2-input-action.png?auto=format&amp;dpr=0.75&amp;fm=webp&amp;max-w=600 396w,https://www.datocms-assets.com/77616/1660781073-fpmfs-pt2-input-action.png?auto=format&amp;fm=webp&amp;max-w=600 528w" sizes="(max-width: 528px) 100vw, 528px" type="image/webp"/><source srcSet="https://www.datocms-assets.com/77616/1660781073-fpmfs-pt2-input-action.png?auto=format&amp;dpr=0.25&amp;max-w=600 132w,https://www.datocms-assets.com/77616/1660781073-fpmfs-pt2-input-action.png?auto=format&amp;dpr=0.5&amp;max-w=600 264w,https://www.datocms-assets.com/77616/1660781073-fpmfs-pt2-input-action.png?auto=format&amp;dpr=0.75&amp;max-w=600 396w,https://www.datocms-assets.com/77616/1660781073-fpmfs-pt2-input-action.png?auto=format&amp;max-w=600 528w" sizes="(max-width: 528px) 100vw, 528px"/><img src="https://www.datocms-assets.com/77616/1660781073-fpmfs-pt2-input-action.png?auto=format&amp;max-w=600" alt="" style="position:absolute;left:0;top:0;width:100%;height:100%" loading="lazy"/></picture></noscript></div></div><p class="py-2 false">I named them <code class="px-1 rounded-sm bg-snow-storm-0 dark:bg-polar-night-2">IA_Move</code> and <code class="px-1 rounded-sm bg-snow-storm-0 dark:bg-polar-night-2">IA_Look</code>. </p><p class="py-2 false">Open <code class="px-1 rounded-sm bg-snow-storm-0 dark:bg-polar-night-2">IA_Move</code> and set <code class="px-1 rounded-sm bg-snow-storm-0 dark:bg-polar-night-2">Value Type</code> to <code class="px-1 rounded-sm bg-snow-storm-0 dark:bg-polar-night-2">Axis2D (Vector2D)</code>. </p><p class="py-2 false">Do the same for <code class="px-1 rounded-sm bg-snow-storm-0 dark:bg-polar-night-2">IA_Look</code>.</p><p class="py-2 false">Next right-click again and create an Input Mapping Context object. I named mine <code class="px-1 rounded-sm bg-snow-storm-0 dark:bg-polar-night-2">IMC_Default</code>.</p><p class="py-2 false">Open it and add a mapping for <code class="px-1 rounded-sm bg-snow-storm-0 dark:bg-polar-night-2">IA_Move</code>. Then add control bindings for whatever inputs you want to handle. For this tutorial I&#x27;m adding WASD and <code class="px-1 rounded-sm bg-snow-storm-0 dark:bg-polar-night-2">Gamepad Left Thumbstick 2D-Axis</code>. The idea is to make input mappings so that the final value (the Vector2D value type) has X representing forward (positive) and backward (negative) movement, and Y representing right (positive) and left (negative) movement. To accomplish this for WASD we need to add a few swizzles and negates which is out of this scope, but the result should look like this:</p><div class="flex justify-center cursor-pointer"><div style="overflow:hidden;position:relative;width:100%;max-width:621px"><img style="display:block;width:100%" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2MjEiIGhlaWdodD0iMTA5OSI+PC9zdmc+" aria-hidden="true" alt=""/><img role="presentation" aria-hidden="true" alt="" src="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAoHBxASBgoNEhAHBgYNDg4QDgYGDhENDQgYFxkZGBYVFhUaHysjGh0oHRUWJDUlKC0vMjIyGSI4PTcwPCsxMi8BCgsLBQUFEAUFEC8cFhwvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL//AABEIABkADgMBIgACEQEDEQH/xAAWAAEBAQAAAAAAAAAAAAAAAAADBgH/xAAbEAACAgMBAAAAAAAAAAAAAAAAAwFBIjEyAv/EABQBAQAAAAAAAAAAAAAAAAAAAAD/xAAUEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwCEd1ATaEbOcBtnQGtnINvrQjegWUB//9k=" style="opacity:1;transition:opacity 500ms;position:absolute;left:0;top:0;width:100%"/><noscript><picture><source srcSet="https://www.datocms-assets.com/77616/1660830153-fpmfs-pt2-input-mapping.png?auto=format&amp;dpr=0.25&amp;fm=webp&amp;max-w=600 155w,https://www.datocms-assets.com/77616/1660830153-fpmfs-pt2-input-mapping.png?auto=format&amp;dpr=0.5&amp;fm=webp&amp;max-w=600 310w,https://www.datocms-assets.com/77616/1660830153-fpmfs-pt2-input-mapping.png?auto=format&amp;dpr=0.75&amp;fm=webp&amp;max-w=600 465w,https://www.datocms-assets.com/77616/1660830153-fpmfs-pt2-input-mapping.png?auto=format&amp;fm=webp&amp;max-w=600 621w" sizes="(max-width: 621px) 100vw, 621px" type="image/webp"/><source srcSet="https://www.datocms-assets.com/77616/1660830153-fpmfs-pt2-input-mapping.png?auto=format&amp;dpr=0.25&amp;max-w=600 155w,https://www.datocms-assets.com/77616/1660830153-fpmfs-pt2-input-mapping.png?auto=format&amp;dpr=0.5&amp;max-w=600 310w,https://www.datocms-assets.com/77616/1660830153-fpmfs-pt2-input-mapping.png?auto=format&amp;dpr=0.75&amp;max-w=600 465w,https://www.datocms-assets.com/77616/1660830153-fpmfs-pt2-input-mapping.png?auto=format&amp;max-w=600 621w" sizes="(max-width: 621px) 100vw, 621px"/><img src="https://www.datocms-assets.com/77616/1660830153-fpmfs-pt2-input-mapping.png?auto=format&amp;max-w=600" alt="" style="position:absolute;left:0;top:0;width:100%;height:100%" loading="lazy"/></picture></noscript></div></div><p class="py-2 false">(Dead zone is added to prevent the neutral position from drifting for gamepads.)</p><p class="py-2 false">Add another mapping entry for IA_Look. This entry is much simpler as we can directly use the input values for mouse XY and the right thumbstick for gamepads. The idea here is that the X-axis represents yaw (left-right) and the Y-axis represents pitch (up-down). It should look like this:</p><div class="flex justify-center cursor-pointer"><div style="overflow:hidden;position:relative;width:100%;max-width:615px"><img style="display:block;width:100%" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2MTUiIGhlaWdodD0iNjAyIj48L3N2Zz4=" aria-hidden="true" alt=""/><img role="presentation" aria-hidden="true" alt="" src="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAoHBwgLEAoGCg8IBgoGBw0QCQYIBxEJFgcYFxMZGBYTFhUaHysjGh0oHRUWJDUlKC0vMjIyGSI4PTcwPCsxMi8BCgsLDgsKEAoKEC8cFhwvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL//AABEIABgAGAMBIgACEQEDEQH/xAAYAAEAAwEAAAAAAAAAAAAAAAAAAQIDBv/EABgQAQEBAQEAAAAAAAAAAAAAAAACEQMB/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhEDEQA/AOHv1nqLpWaBHQR09AXtluACl0AD/9k=" style="opacity:1;transition:opacity 500ms;position:absolute;left:0;top:0;width:100%"/><noscript><picture><source srcSet="https://www.datocms-assets.com/77616/1660830198-fpmfs-pt2-input-mapping-2.png?auto=format&amp;dpr=0.25&amp;fm=webp&amp;max-w=600 153w,https://www.datocms-assets.com/77616/1660830198-fpmfs-pt2-input-mapping-2.png?auto=format&amp;dpr=0.5&amp;fm=webp&amp;max-w=600 307w,https://www.datocms-assets.com/77616/1660830198-fpmfs-pt2-input-mapping-2.png?auto=format&amp;dpr=0.75&amp;fm=webp&amp;max-w=600 461w,https://www.datocms-assets.com/77616/1660830198-fpmfs-pt2-input-mapping-2.png?auto=format&amp;fm=webp&amp;max-w=600 615w" sizes="(max-width: 615px) 100vw, 615px" type="image/webp"/><source srcSet="https://www.datocms-assets.com/77616/1660830198-fpmfs-pt2-input-mapping-2.png?auto=format&amp;dpr=0.25&amp;max-w=600 153w,https://www.datocms-assets.com/77616/1660830198-fpmfs-pt2-input-mapping-2.png?auto=format&amp;dpr=0.5&amp;max-w=600 307w,https://www.datocms-assets.com/77616/1660830198-fpmfs-pt2-input-mapping-2.png?auto=format&amp;dpr=0.75&amp;max-w=600 461w,https://www.datocms-assets.com/77616/1660830198-fpmfs-pt2-input-mapping-2.png?auto=format&amp;max-w=600 615w" sizes="(max-width: 615px) 100vw, 615px"/><img src="https://www.datocms-assets.com/77616/1660830198-fpmfs-pt2-input-mapping-2.png?auto=format&amp;max-w=600" alt="" style="position:absolute;left:0;top:0;width:100%;height:100%" loading="lazy"/></picture></noscript></div></div><h1 class="font-display text-4xl pt-6">Input Handling</h1><p class="py-2 false">We can now move over to the code that will utilize these objects.</p><p class="py-2 false">First, to access Enhanced Input in C++ we need to add it to our build script. Open your Build.cs (mine is located as <code class="px-1 rounded-sm bg-snow-storm-0 dark:bg-polar-night-2">Source/Cactus/Cactus.Build.cs</code>) and add &quot;EnhancedInput&quot; to the public dependencies:</p><div class="border-snow-storm-0 dark:border-polar-night-1 border-2 rounded flex flex-col gap-1 my-2"><span class="text-polar-night-3 mx-2">csharp</span><pre style="color:#f8f8f2;background:#2E3440;font-family:&quot;Fira Code&quot;, Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0;overflow:auto;border-radius:0"><code class="language-csharp" style="color:#f8f8f2;background:none;font-family:&quot;Fira Code&quot;, Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">1</span><span>PublicDependencyModuleNames</span><span class="token" style="color:#81A1C1">.</span><span class="token" style="color:#88C0D0">AddRange</span><span class="token" style="color:#81A1C1">(</span><span class="token" style="color:#81A1C1">new</span><span> </span><span class="token constructor-invocation" style="color:#81A1C1">string</span><span class="token constructor-invocation" style="color:#81A1C1">[</span><span class="token constructor-invocation" style="color:#81A1C1">]</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">2</span><span>  </span><span class="token" style="color:#81A1C1">{</span><span class="token" style="color:#A3BE8C">&quot;Core&quot;</span><span class="token" style="color:#81A1C1">,</span><span> </span><span class="token" style="color:#A3BE8C">&quot;CoreUObject&quot;</span><span class="token" style="color:#81A1C1">,</span><span> </span><span class="token" style="color:#A3BE8C">&quot;Engine&quot;</span><span class="token" style="color:#81A1C1">,</span><span> </span><span class="token" style="color:#A3BE8C">&quot;InputCore&quot;</span><span class="token" style="color:#81A1C1">,</span><span> </span><span class="token" style="color:#A3BE8C">&quot;EnhancedInput&quot;</span><span class="token" style="color:#81A1C1">}</span><span class="token" style="color:#81A1C1">)</span><span class="token" style="color:#81A1C1">;</span></code></pre></div><p class="py-2 false">(You may need to regenerate project files after doing this.)</p><p class="py-2 false">Next, we need to do the following things:</p><ul class="list-disc list-inside"><li class="my-2 pl-2"><p class="py-2 inline">Setup the Input Mapping Context object in the controller class</p></li><li class="my-2 pl-2"><p class="py-2 inline">Add the input actions as <code class="px-1 rounded-sm bg-snow-storm-0 dark:bg-polar-night-2">UPROPERTY</code> fields so we can set them from the editor</p></li><li class="my-2 pl-2"><p class="py-2 inline">Add an empty (for now) Move and Look function</p></li><li class="my-2 pl-2"><p class="py-2 inline">Override <code class="px-1 rounded-sm bg-snow-storm-0 dark:bg-polar-night-2">SetupPlayerInputComponent</code> to handle binding the actions to code</p></li></ul><h2 class="font-display text-3xl pt-5">Input Mapping Context</h2><p class="py-2 false">The idea (I think) behind mapping contexts is that you can have different contexts depending on what your doing (main gameplay, pause menu, spectator etc.) that can alter how you handle inputs. For our scenario we&#x27;ll stick with a single one, and we&#x27;ll let the Player Controller handle it since it seems appropriate.</p><p class="py-2 false">We need a property for the Input Mapping Context object that we can set from the editor, and we need to handle using it in our <code class="px-1 rounded-sm bg-snow-storm-0 dark:bg-polar-night-2">BeginPlay</code> function which is called at the start of the game. In your player controller header file add to the class:</p><div class="border-snow-storm-0 dark:border-polar-night-1 border-2 rounded flex flex-col gap-1 my-2"><span class="text-polar-night-3 mx-2">cpp</span><pre style="color:#f8f8f2;background:#2E3440;font-family:&quot;Fira Code&quot;, Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0;overflow:auto;border-radius:0"><code class="language-cpp" style="color:#f8f8f2;background:none;font-family:&quot;Fira Code&quot;, Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">1</span><span class="token" style="color:#81A1C1">public</span><span class="token" style="color:#81A1C1">:</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">2</span><span>  </span><span class="token" style="color:#88C0D0">UPROPERTY</span><span class="token" style="color:#81A1C1">(</span><span>EditDefaultsOnly</span><span class="token" style="color:#81A1C1">)</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">3</span><span>  </span><span class="token" style="color:#81A1C1">class</span><span> </span><span class="token" style="color:#88C0D0">UInputMappingContext</span><span class="token" style="color:#81A1C1">*</span><span> DefaultInputMappingContext</span><span class="token" style="color:#81A1C1">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">4</span>  
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">5</span><span></span><span class="token" style="color:#81A1C1">protected</span><span class="token" style="color:#81A1C1">:</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">6</span><span>  </span><span class="token" style="color:#81A1C1">virtual</span><span> </span><span class="token" style="color:#81A1C1">void</span><span> </span><span class="token" style="color:#88C0D0">BeginPlay</span><span class="token" style="color:#81A1C1">(</span><span class="token" style="color:#81A1C1">)</span><span> </span><span class="token" style="color:#81A1C1">override</span><span class="token" style="color:#81A1C1">;</span></code></pre></div><p class="py-2 false">Then we add the <code class="px-1 rounded-sm bg-snow-storm-0 dark:bg-polar-night-2">BeginPlay</code> implementation where we fetch the Enhanced Input subsytem and set our context (we also need to include the relevant header):</p><div class="border-snow-storm-0 dark:border-polar-night-1 border-2 rounded flex flex-col gap-1 my-2"><span class="text-polar-night-3 mx-2">cpp</span><pre style="color:#f8f8f2;background:#2E3440;font-family:&quot;Fira Code&quot;, Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0;overflow:auto;border-radius:0"><code class="language-cpp" style="color:#f8f8f2;background:none;font-family:&quot;Fira Code&quot;, Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">1</span><span class="token macro directive-hash" style="color:#81A1C1">#</span><span class="token macro directive" style="color:#81A1C1">include</span><span class="token macro" style="color:#81A1C1"> </span><span class="token macro" style="color:#A3BE8C">&quot;CactusPlayerController.h&quot;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">2</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">3</span><span></span><span class="token macro directive-hash" style="color:#81A1C1">#</span><span class="token macro directive" style="color:#81A1C1">include</span><span class="token macro" style="color:#81A1C1"> </span><span class="token macro" style="color:#A3BE8C">&quot;EnhancedInputSubsystems.h&quot;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">4</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">5</span><span></span><span class="token" style="color:#81A1C1">void</span><span> </span><span class="token" style="color:#88C0D0">ACactusPlayerController</span><span class="token double-colon" style="color:#81A1C1">::</span><span class="token" style="color:#88C0D0">BeginPlay</span><span class="token" style="color:#81A1C1">(</span><span class="token" style="color:#81A1C1">)</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">6</span><span></span><span class="token" style="color:#81A1C1">{</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">7</span><span>  </span><span class="token" style="color:#88C0D0">Super</span><span class="token double-colon" style="color:#81A1C1">::</span><span class="token" style="color:#88C0D0">BeginPlay</span><span class="token" style="color:#81A1C1">(</span><span class="token" style="color:#81A1C1">)</span><span class="token" style="color:#81A1C1">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">8</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">9</span><span>  </span><span class="token" style="color:#81A1C1">if</span><span> </span><span class="token" style="color:#81A1C1">(</span><span>UEnhancedInputLocalPlayerSubsystem</span><span class="token" style="color:#81A1C1">*</span><span> Subsystem </span><span class="token" style="color:#81A1C1">=</span><span> ULocalPlayer</span><span class="token double-colon" style="color:#81A1C1">::</span><span class="token generic-function" style="color:#88C0D0">GetSubsystem</span><span class="token generic-function generic" style="color:#81A1C1">&lt;</span><span class="token generic-function generic" style="color:#88C0D0">UEnhancedInputLocalPlayerSubsystem</span><span class="token generic-function generic" style="color:#81A1C1">&gt;</span><span class="token" style="color:#81A1C1">(</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">10</span><span>    </span><span class="token" style="color:#88C0D0">GetLocalPlayer</span><span class="token" style="color:#81A1C1">(</span><span class="token" style="color:#81A1C1">)</span><span class="token" style="color:#81A1C1">)</span><span class="token" style="color:#81A1C1">)</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">11</span><span>  </span><span class="token" style="color:#81A1C1">{</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">12</span><span>    Subsystem</span><span class="token" style="color:#81A1C1">-&gt;</span><span class="token" style="color:#88C0D0">ClearAllMappings</span><span class="token" style="color:#81A1C1">(</span><span class="token" style="color:#81A1C1">)</span><span class="token" style="color:#81A1C1">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">13</span><span>    Subsystem</span><span class="token" style="color:#81A1C1">-&gt;</span><span class="token" style="color:#88C0D0">AddMappingContext</span><span class="token" style="color:#81A1C1">(</span><span>DefaultInputMappingContext</span><span class="token" style="color:#81A1C1">,</span><span> </span><span class="token" style="color:#B48EAD">0</span><span class="token" style="color:#81A1C1">)</span><span class="token" style="color:#81A1C1">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">14</span><span>  </span><span class="token" style="color:#81A1C1">}</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">15</span><span></span><span class="token" style="color:#81A1C1">}</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">16</span></code></pre></div><p class="py-2 false">That&#x27;s it for the Player Controller class. Don&#x27;t forget to set the context object (<code class="px-1 rounded-sm bg-snow-storm-0 dark:bg-polar-night-2">IMC_Default</code>) in your Player Controller BP!</p><h2 class="font-display text-3xl pt-5">Input Action fields</h2><p class="py-2 false">Next up we need to add two fields of type <code class="px-1 rounded-sm bg-snow-storm-0 dark:bg-polar-night-2">UInputAction*</code> for the move action and look action. Inside your player pawn header file add:</p><div class="border-snow-storm-0 dark:border-polar-night-1 border-2 rounded flex flex-col gap-1 my-2"><span class="text-polar-night-3 mx-2">cpp</span><pre style="color:#f8f8f2;background:#2E3440;font-family:&quot;Fira Code&quot;, Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0;overflow:auto;border-radius:0"><code class="language-cpp" style="color:#f8f8f2;background:none;font-family:&quot;Fira Code&quot;, Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">1</span><span class="token" style="color:#88C0D0">UPROPERTY</span><span class="token" style="color:#81A1C1">(</span><span>EditDefaultsOnly</span><span class="token" style="color:#81A1C1">,</span><span> Category</span><span class="token" style="color:#81A1C1">=</span><span class="token" style="color:#A3BE8C">&quot;Input&quot;</span><span class="token" style="color:#81A1C1">)</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">2</span><span>UInputAction</span><span class="token" style="color:#81A1C1">*</span><span> MoveAction</span><span class="token" style="color:#81A1C1">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">3</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">4</span><span></span><span class="token" style="color:#88C0D0">UPROPERTY</span><span class="token" style="color:#81A1C1">(</span><span>EditDefaultsOnly</span><span class="token" style="color:#81A1C1">,</span><span> Category</span><span class="token" style="color:#81A1C1">=</span><span class="token" style="color:#A3BE8C">&quot;Input&quot;</span><span class="token" style="color:#81A1C1">)</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">5</span><span>UInputAction</span><span class="token" style="color:#81A1C1">*</span><span> LookAction</span><span class="token" style="color:#81A1C1">;</span></code></pre></div><p class="py-2 false">I&#x27;ve added them just below the component declarations, within the public scope. We also need to have <code class="px-1 rounded-sm bg-snow-storm-0 dark:bg-polar-night-2">UInputAction</code> accessible. I like to forward declare them however you can also import the action header file. Above my player pawn class definition add:</p><div class="border-snow-storm-0 dark:border-polar-night-1 border-2 rounded flex flex-col gap-1 my-2"><span class="text-polar-night-3 mx-2">cpp</span><pre style="color:#f8f8f2;background:#2E3440;font-family:&quot;Fira Code&quot;, Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0;overflow:auto;border-radius:0"><code class="language-cpp" style="color:#f8f8f2;background:none;font-family:&quot;Fira Code&quot;, Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">1</span><span class="token" style="color:#81A1C1">class</span><span> </span><span class="token" style="color:#88C0D0">UInputAction</span><span class="token" style="color:#81A1C1">;</span></code></pre></div><h2 class="font-display text-3xl pt-5">Stub functions</h2><p class="py-2 false">We need to add two functions, one for Move and one for Look. We&#x27;ll implement them soon but for now we just need to get the input handling out of the way. In your pawn header add the functions to the class:</p><div class="border-snow-storm-0 dark:border-polar-night-1 border-2 rounded flex flex-col gap-1 my-2"><span class="text-polar-night-3 mx-2">cpp</span><pre style="color:#f8f8f2;background:#2E3440;font-family:&quot;Fira Code&quot;, Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0;overflow:auto;border-radius:0"><code class="language-cpp" style="color:#f8f8f2;background:none;font-family:&quot;Fira Code&quot;, Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">1</span><span class="token" style="color:#81A1C1">private</span><span class="token" style="color:#81A1C1">:</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">2</span><span>  </span><span class="token" style="color:#81A1C1">void</span><span> </span><span class="token" style="color:#88C0D0">OnInput_Move</span><span class="token" style="color:#81A1C1">(</span><span class="token" style="color:#81A1C1">const</span><span> FInputActionValue</span><span class="token" style="color:#81A1C1">&amp;</span><span> Value</span><span class="token" style="color:#81A1C1">)</span><span class="token" style="color:#81A1C1">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">3</span><span>  </span><span class="token" style="color:#81A1C1">void</span><span> </span><span class="token" style="color:#88C0D0">OnInput_Look</span><span class="token" style="color:#81A1C1">(</span><span class="token" style="color:#81A1C1">const</span><span> FInputActionValue</span><span class="token" style="color:#81A1C1">&amp;</span><span> Value</span><span class="token" style="color:#81A1C1">)</span><span class="token" style="color:#81A1C1">;</span></code></pre></div><p class="py-2 false">We also need to forward declare <code class="px-1 rounded-sm bg-snow-storm-0 dark:bg-polar-night-2">FInputActionValue</code>:</p><div class="border-snow-storm-0 dark:border-polar-night-1 border-2 rounded flex flex-col gap-1 my-2"><span class="text-polar-night-3 mx-2">cpp</span><pre style="color:#f8f8f2;background:#2E3440;font-family:&quot;Fira Code&quot;, Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0;overflow:auto;border-radius:0"><code class="language-cpp" style="color:#f8f8f2;background:none;font-family:&quot;Fira Code&quot;, Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">1</span><span class="token" style="color:#81A1C1">struct</span><span> </span><span class="token" style="color:#88C0D0">FInputActionValue</span><span class="token" style="color:#81A1C1">;</span></code></pre></div><p class="py-2 false">Then add the empty implementations to the cpp file. Optionally you can also log the input value to verify that the bindings work later on:</p><div class="border-snow-storm-0 dark:border-polar-night-1 border-2 rounded flex flex-col gap-1 my-2"><span class="text-polar-night-3 mx-2">cpp</span><pre style="color:#f8f8f2;background:#2E3440;font-family:&quot;Fira Code&quot;, Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0;overflow:auto;border-radius:0"><code class="language-cpp" style="color:#f8f8f2;background:none;font-family:&quot;Fira Code&quot;, Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">1</span><span class="token" style="color:#81A1C1">void</span><span> </span><span class="token" style="color:#88C0D0">ACactusPlayerPawn</span><span class="token double-colon" style="color:#81A1C1">::</span><span class="token" style="color:#88C0D0">OnInput_Move</span><span class="token" style="color:#81A1C1">(</span><span class="token" style="color:#81A1C1">const</span><span> FInputActionValue</span><span class="token" style="color:#81A1C1">&amp;</span><span> Value</span><span class="token" style="color:#81A1C1">)</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">2</span><span></span><span class="token" style="color:#81A1C1">{</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">3</span><span>  </span><span class="token" style="color:#88C0D0">UE_LOG</span><span class="token" style="color:#81A1C1">(</span><span>LogTemp</span><span class="token" style="color:#81A1C1">,</span><span> Log</span><span class="token" style="color:#81A1C1">,</span><span> </span><span class="token" style="color:#88C0D0">TEXT</span><span class="token" style="color:#81A1C1">(</span><span class="token" style="color:#A3BE8C">&quot;Move: %s&quot;</span><span class="token" style="color:#81A1C1">)</span><span class="token" style="color:#81A1C1">,</span><span> </span><span class="token" style="color:#81A1C1">*</span><span>Value</span><span class="token" style="color:#81A1C1">.</span><span class="token generic-function" style="color:#88C0D0">Get</span><span class="token generic-function generic" style="color:#81A1C1">&lt;</span><span class="token generic-function generic" style="color:#88C0D0">FVector2D</span><span class="token generic-function generic" style="color:#81A1C1">&gt;</span><span class="token" style="color:#81A1C1">(</span><span class="token" style="color:#81A1C1">)</span><span class="token" style="color:#81A1C1">.</span><span class="token" style="color:#88C0D0">ToString</span><span class="token" style="color:#81A1C1">(</span><span class="token" style="color:#81A1C1">)</span><span class="token" style="color:#81A1C1">)</span><span class="token" style="color:#81A1C1">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">4</span><span></span><span class="token" style="color:#81A1C1">}</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">5</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">6</span><span></span><span class="token" style="color:#81A1C1">void</span><span> </span><span class="token" style="color:#88C0D0">ACactusPlayerPawn</span><span class="token double-colon" style="color:#81A1C1">::</span><span class="token" style="color:#88C0D0">OnInput_Look</span><span class="token" style="color:#81A1C1">(</span><span class="token" style="color:#81A1C1">const</span><span> FInputActionValue</span><span class="token" style="color:#81A1C1">&amp;</span><span> Value</span><span class="token" style="color:#81A1C1">)</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">7</span><span></span><span class="token" style="color:#81A1C1">{</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">8</span><span>  </span><span class="token" style="color:#88C0D0">UE_LOG</span><span class="token" style="color:#81A1C1">(</span><span>LogTemp</span><span class="token" style="color:#81A1C1">,</span><span> Log</span><span class="token" style="color:#81A1C1">,</span><span> </span><span class="token" style="color:#88C0D0">TEXT</span><span class="token" style="color:#81A1C1">(</span><span class="token" style="color:#A3BE8C">&quot;Look: %s&quot;</span><span class="token" style="color:#81A1C1">)</span><span class="token" style="color:#81A1C1">,</span><span> </span><span class="token" style="color:#81A1C1">*</span><span>Value</span><span class="token" style="color:#81A1C1">.</span><span class="token generic-function" style="color:#88C0D0">Get</span><span class="token generic-function generic" style="color:#81A1C1">&lt;</span><span class="token generic-function generic" style="color:#88C0D0">FVector2D</span><span class="token generic-function generic" style="color:#81A1C1">&gt;</span><span class="token" style="color:#81A1C1">(</span><span class="token" style="color:#81A1C1">)</span><span class="token" style="color:#81A1C1">.</span><span class="token" style="color:#88C0D0">ToString</span><span class="token" style="color:#81A1C1">(</span><span class="token" style="color:#81A1C1">)</span><span class="token" style="color:#81A1C1">)</span><span class="token" style="color:#81A1C1">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">9</span><span></span><span class="token" style="color:#81A1C1">}</span></code></pre></div><h2 class="font-display text-3xl pt-5">SetupPlayerInputComponent</h2><p class="py-2 false"><code class="px-1 rounded-sm bg-snow-storm-0 dark:bg-polar-night-2">SetupPlayerInputComponent</code> comes from Pawn and is a protected virtual function that is called when it is time to setup any input bindings (looking at the Unreal source it probably during <code class="px-1 rounded-sm bg-snow-storm-0 dark:bg-polar-night-2">APawn::PawnClientRestart</code>).</p><p class="py-2 false">We need to override it and add our own bindings. The base implementation is empty, but we can still call the <code class="px-1 rounded-sm bg-snow-storm-0 dark:bg-polar-night-2">Super</code> variant in case that ever changes. Binding actions is similar to the built-in way except we cast the input component to the Enhanced Input variant, so it accepts our input action objects.</p><p class="py-2 false">In the pawn header file add:</p><div class="border-snow-storm-0 dark:border-polar-night-1 border-2 rounded flex flex-col gap-1 my-2"><span class="text-polar-night-3 mx-2">cpp</span><pre style="color:#f8f8f2;background:#2E3440;font-family:&quot;Fira Code&quot;, Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0;overflow:auto;border-radius:0"><code class="language-cpp" style="color:#f8f8f2;background:none;font-family:&quot;Fira Code&quot;, Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">1</span><span class="token" style="color:#81A1C1">protected</span><span class="token" style="color:#81A1C1">:</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">2</span><span>  </span><span class="token" style="color:#81A1C1">virtual</span><span> </span><span class="token" style="color:#81A1C1">void</span><span> </span><span class="token" style="color:#88C0D0">SetupPlayerInputComponent</span><span class="token" style="color:#81A1C1">(</span><span>UInputComponent</span><span class="token" style="color:#81A1C1">*</span><span> PlayerInputComponent</span><span class="token" style="color:#81A1C1">)</span><span> </span><span class="token" style="color:#81A1C1">override</span><span class="token" style="color:#81A1C1">;</span></code></pre></div><p class="py-2 false">And for the cpp file add:</p><div class="border-snow-storm-0 dark:border-polar-night-1 border-2 rounded flex flex-col gap-1 my-2"><span class="text-polar-night-3 mx-2">cpp</span><pre style="color:#f8f8f2;background:#2E3440;font-family:&quot;Fira Code&quot;, Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0;overflow:auto;border-radius:0"><code class="language-cpp" style="color:#f8f8f2;background:none;font-family:&quot;Fira Code&quot;, Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">1</span><span class="token" style="color:#81A1C1">void</span><span> </span><span class="token" style="color:#88C0D0">ACactusPlayerPawn</span><span class="token double-colon" style="color:#81A1C1">::</span><span class="token" style="color:#88C0D0">SetupPlayerInputComponent</span><span class="token" style="color:#81A1C1">(</span><span>UInputComponent</span><span class="token" style="color:#81A1C1">*</span><span> PlayerInputComponent</span><span class="token" style="color:#81A1C1">)</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">2</span><span></span><span class="token" style="color:#81A1C1">{</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">3</span><span>  </span><span class="token" style="color:#88C0D0">Super</span><span class="token double-colon" style="color:#81A1C1">::</span><span class="token" style="color:#88C0D0">SetupPlayerInputComponent</span><span class="token" style="color:#81A1C1">(</span><span>PlayerInputComponent</span><span class="token" style="color:#81A1C1">)</span><span class="token" style="color:#81A1C1">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">4</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">5</span><span>  UEnhancedInputComponent</span><span class="token" style="color:#81A1C1">*</span><span> PlayerEnhancedInputComponent </span><span class="token" style="color:#81A1C1">=</span><span> </span><span class="token generic-function" style="color:#88C0D0">Cast</span><span class="token generic-function generic" style="color:#81A1C1">&lt;</span><span class="token generic-function generic" style="color:#88C0D0">UEnhancedInputComponent</span><span class="token generic-function generic" style="color:#81A1C1">&gt;</span><span class="token" style="color:#81A1C1">(</span><span>PlayerInputComponent</span><span class="token" style="color:#81A1C1">)</span><span class="token" style="color:#81A1C1">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">6</span><span>  </span><span class="token" style="color:#81A1C1">if</span><span> </span><span class="token" style="color:#81A1C1">(</span><span>PlayerEnhancedInputComponent</span><span class="token" style="color:#81A1C1">)</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">7</span><span>  </span><span class="token" style="color:#81A1C1">{</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">8</span><span>    PlayerEnhancedInputComponent</span><span class="token" style="color:#81A1C1">-&gt;</span><span class="token" style="color:#88C0D0">BindAction</span><span class="token" style="color:#81A1C1">(</span><span>MoveAction</span><span class="token" style="color:#81A1C1">,</span><span> ETriggerEvent</span><span class="token double-colon" style="color:#81A1C1">::</span><span>Triggered</span><span class="token" style="color:#81A1C1">,</span><span> </span><span class="token" style="color:#81A1C1">this</span><span class="token" style="color:#81A1C1">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">9</span><span>                                             </span><span class="token" style="color:#81A1C1">&amp;</span><span>ACactusPlayerPawn</span><span class="token double-colon" style="color:#81A1C1">::</span><span>OnInput_Move</span><span class="token" style="color:#81A1C1">)</span><span class="token" style="color:#81A1C1">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">10</span><span>    PlayerEnhancedInputComponent</span><span class="token" style="color:#81A1C1">-&gt;</span><span class="token" style="color:#88C0D0">BindAction</span><span class="token" style="color:#81A1C1">(</span><span>LookAction</span><span class="token" style="color:#81A1C1">,</span><span> ETriggerEvent</span><span class="token double-colon" style="color:#81A1C1">::</span><span>Triggered</span><span class="token" style="color:#81A1C1">,</span><span> </span><span class="token" style="color:#81A1C1">this</span><span class="token" style="color:#81A1C1">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">11</span><span>                                             </span><span class="token" style="color:#81A1C1">&amp;</span><span>ACactusPlayerPawn</span><span class="token double-colon" style="color:#81A1C1">::</span><span>OnInput_Look</span><span class="token" style="color:#81A1C1">)</span><span class="token" style="color:#81A1C1">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">12</span><span>  </span><span class="token" style="color:#81A1C1">}</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">13</span><span></span><span class="token" style="color:#81A1C1">}</span></code></pre></div><h2 class="font-display text-3xl pt-5">Testing</h2><p class="py-2 false">Everything should be ready to accept input now. Don&#x27;t forget to assign the Input Mapping Context object in the Player Controller BP, and the inputs actions in the Pawn BP. If you added the log statements to the Move and Look function, try pressing WASD and moving the mouse. You should see output similar to this:</p><div class="flex justify-center cursor-pointer"><div style="overflow:hidden;position:relative;width:100%;max-width:237px"><img style="display:block;width:100%" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMzciIGhlaWdodD0iMTE1Ij48L3N2Zz4=" aria-hidden="true" alt=""/><img role="presentation" aria-hidden="true" alt="" src="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAoHBwgHBg4IEggNDgcHDg0HDggODhEJDRENFxUZGBYVFhUaHysjGh0oHRUiJDUlKC0vMjIyGSI4PTcwPCsxMi8BCgsLBQUFEAUFEC8cFhwvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL//AABEIAAwAGAMBIgACEQEDEQH/xAAYAAACAwAAAAAAAAAAAAAAAAAAAwEEBv/EABkQAAMBAQEAAAAAAAAAAAAAAAABAhEDBP/EABQBAQAAAAAAAAAAAAAAAAAAAAD/xAAUEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwDK9cwTK1k9qeCopgM6NSBW9FPAA//Z" style="opacity:1;transition:opacity 500ms;position:absolute;left:0;top:0;width:100%"/><noscript><picture><source srcSet="https://www.datocms-assets.com/77616/1660822248-fpmfs-pt2-input-testing.png?auto=format&amp;dpr=0.25&amp;fm=webp&amp;max-w=600 59w,https://www.datocms-assets.com/77616/1660822248-fpmfs-pt2-input-testing.png?auto=format&amp;dpr=0.5&amp;fm=webp&amp;max-w=600 118w,https://www.datocms-assets.com/77616/1660822248-fpmfs-pt2-input-testing.png?auto=format&amp;dpr=0.75&amp;fm=webp&amp;max-w=600 177w,https://www.datocms-assets.com/77616/1660822248-fpmfs-pt2-input-testing.png?auto=format&amp;fm=webp&amp;max-w=600 237w" sizes="(max-width: 237px) 100vw, 237px" type="image/webp"/><source srcSet="https://www.datocms-assets.com/77616/1660822248-fpmfs-pt2-input-testing.png?auto=format&amp;dpr=0.25&amp;max-w=600 59w,https://www.datocms-assets.com/77616/1660822248-fpmfs-pt2-input-testing.png?auto=format&amp;dpr=0.5&amp;max-w=600 118w,https://www.datocms-assets.com/77616/1660822248-fpmfs-pt2-input-testing.png?auto=format&amp;dpr=0.75&amp;max-w=600 177w,https://www.datocms-assets.com/77616/1660822248-fpmfs-pt2-input-testing.png?auto=format&amp;max-w=600 237w" sizes="(max-width: 237px) 100vw, 237px"/><img src="https://www.datocms-assets.com/77616/1660822248-fpmfs-pt2-input-testing.png?auto=format&amp;max-w=600" alt="" style="position:absolute;left:0;top:0;width:100%;height:100%" loading="lazy"/></picture></noscript></div></div><p class="py-2 false">The inputs should give these values:</p><ul class="list-disc list-inside"><li class="my-2 pl-2"><p class="py-2 inline">W should give X=1 Y=0</p></li><li class="my-2 pl-2"><p class="py-2 inline">S should give X=-1 Y=0</p></li><li class="my-2 pl-2"><p class="py-2 inline">A should give X=0 Y=-1</p></li><li class="my-2 pl-2"><p class="py-2 inline">D should give X=0 Y=1</p></li><li class="my-2 pl-2"><p class="py-2 inline">Dragging the mouse up should give positive Y</p></li><li class="my-2 pl-2"><p class="py-2 inline">Dragging the mouse down should give negative Y</p></li><li class="my-2 pl-2"><p class="py-2 inline">Dragging the mouse right should give positive X</p></li><li class="my-2 pl-2"><p class="py-2 inline">Dragging the mouse left should give negative X</p></li></ul><h1 class="font-display text-4xl pt-6">Look function</h1><p class="py-2 false">We&#x27;ll cover the look function first since it&#x27;s simple. It involves some math but is unrelated to most things we will deal with later on.</p><p class="py-2 false">First we add some editor-exposed variables to adjust how our camera look works. In the pawn header add:</p><div class="border-snow-storm-0 dark:border-polar-night-1 border-2 rounded flex flex-col gap-1 my-2"><span class="text-polar-night-3 mx-2">cpp</span><pre style="color:#f8f8f2;background:#2E3440;font-family:&quot;Fira Code&quot;, Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0;overflow:auto;border-radius:0"><code class="language-cpp" style="color:#f8f8f2;background:none;font-family:&quot;Fira Code&quot;, Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">1</span><span class="token" style="color:#88C0D0">UPROPERTY</span><span class="token" style="color:#81A1C1">(</span><span>EditAnywhere</span><span class="token" style="color:#81A1C1">,</span><span> Category</span><span class="token" style="color:#81A1C1">=</span><span class="token" style="color:#A3BE8C">&quot;Input&quot;</span><span class="token" style="color:#81A1C1">)</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">2</span><span>FVector2D CameraSensitivity</span><span class="token" style="color:#81A1C1">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">3</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">4</span><span></span><span class="token" style="color:#88C0D0">UPROPERTY</span><span class="token" style="color:#81A1C1">(</span><span>EditAnywhere</span><span class="token" style="color:#81A1C1">,</span><span> Category</span><span class="token" style="color:#81A1C1">=</span><span class="token" style="color:#A3BE8C">&quot;Input&quot;</span><span class="token" style="color:#81A1C1">)</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">5</span><span>FVector2D CameraPitchRange</span><span class="token" style="color:#81A1C1">;</span></code></pre></div><p class="py-2 false">We should also set sensible defaults in our constructor in the cpp file:</p><div class="border-snow-storm-0 dark:border-polar-night-1 border-2 rounded flex flex-col gap-1 my-2"><span class="text-polar-night-3 mx-2">cpp</span><pre style="color:#f8f8f2;background:#2E3440;font-family:&quot;Fira Code&quot;, Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0;overflow:auto;border-radius:0"><code class="language-cpp" style="color:#f8f8f2;background:none;font-family:&quot;Fira Code&quot;, Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">1</span><span class="token" style="color:#88C0D0">ACactusPlayerPawn</span><span class="token double-colon" style="color:#81A1C1">::</span><span class="token" style="color:#88C0D0">ACactusPlayerPawn</span><span class="token" style="color:#81A1C1">(</span><span class="token" style="color:#81A1C1">)</span><span class="token" style="color:#81A1C1">:</span><span> </span><span class="token" style="color:#88C0D0">CameraSensitivity</span><span class="token" style="color:#81A1C1">(</span><span class="token" style="color:#88C0D0">FVector2D</span><span class="token" style="color:#81A1C1">(</span><span class="token" style="color:#B48EAD">180.0f</span><span class="token" style="color:#81A1C1">,</span><span> </span><span class="token" style="color:#B48EAD">90.0f</span><span class="token" style="color:#81A1C1">)</span><span class="token" style="color:#81A1C1">)</span><span class="token" style="color:#81A1C1">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">2</span><span>                                        </span><span class="token" style="color:#88C0D0">CameraPitchRange</span><span class="token" style="color:#81A1C1">(</span><span class="token" style="color:#88C0D0">FVector2D</span><span class="token" style="color:#81A1C1">(</span><span class="token" style="color:#81A1C1">-</span><span class="token" style="color:#B48EAD">80.0f</span><span class="token" style="color:#81A1C1">,</span><span> </span><span class="token" style="color:#B48EAD">80.0f</span><span class="token" style="color:#81A1C1">)</span><span class="token" style="color:#81A1C1">)</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">3</span><span></span><span class="token" style="color:#81A1C1">{</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">4</span><span>  </span><span class="token" style="color:#81A1C1">.</span><span class="token" style="color:#81A1C1">.</span><span class="token" style="color:#81A1C1">.</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">5</span><span></span><span class="token" style="color:#81A1C1">}</span></code></pre></div><p class="py-2 false">Next, we implement the Look function. The logic goes:</p><ol class="list-decimal list-inside"><li class="my-2 pl-2"><p class="py-2 inline">Grab our FVector2D value</p></li><li class="my-2 pl-2"><p class="py-2 inline">Multiply it by the camera sensitivity and delta time</p></li><li class="my-2 pl-2"><p class="py-2 inline">Calculate a new pitch (up and down) value, clamped between our range</p></li><li class="my-2 pl-2"><p class="py-2 inline">Set the cameras rotation to use the new pitch</p></li><li class="my-2 pl-2"><p class="py-2 inline">Calculate a new yaw (left and right) value based on actor rotation</p></li><li class="my-2 pl-2"><p class="py-2 inline">Set actor rotation to use new yaw</p></li></ol><p class="py-2 false">The code looks like this:</p><div class="border-snow-storm-0 dark:border-polar-night-1 border-2 rounded flex flex-col gap-1 my-2"><span class="text-polar-night-3 mx-2">cpp</span><pre style="color:#f8f8f2;background:#2E3440;font-family:&quot;Fira Code&quot;, Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0;overflow:auto;border-radius:0"><code class="language-cpp" style="color:#f8f8f2;background:none;font-family:&quot;Fira Code&quot;, Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">1</span><span class="token" style="color:#81A1C1">void</span><span> </span><span class="token" style="color:#88C0D0">ACactusPlayerPawn</span><span class="token double-colon" style="color:#81A1C1">::</span><span class="token" style="color:#88C0D0">OnInput_Look</span><span class="token" style="color:#81A1C1">(</span><span class="token" style="color:#81A1C1">const</span><span> FInputActionValue</span><span class="token" style="color:#81A1C1">&amp;</span><span> Value</span><span class="token" style="color:#81A1C1">)</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">2</span><span></span><span class="token" style="color:#81A1C1">{</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">3</span><span>  </span><span class="token" style="color:#81A1C1">const</span><span> FVector2D VectorValue </span><span class="token" style="color:#81A1C1">=</span><span> Value</span><span class="token" style="color:#81A1C1">.</span><span class="token generic-function" style="color:#88C0D0">Get</span><span class="token generic-function generic" style="color:#81A1C1">&lt;</span><span class="token generic-function generic" style="color:#88C0D0">FVector2D</span><span class="token generic-function generic" style="color:#81A1C1">&gt;</span><span class="token" style="color:#81A1C1">(</span><span class="token" style="color:#81A1C1">)</span><span> </span><span class="token" style="color:#81A1C1">*</span><span> CameraSensitivity </span><span class="token" style="color:#81A1C1">*</span><span> </span><span class="token" style="color:#88C0D0">GetWorld</span><span class="token" style="color:#81A1C1">(</span><span class="token" style="color:#81A1C1">)</span><span class="token" style="color:#81A1C1">-&gt;</span><span class="token" style="color:#88C0D0">GetDeltaSeconds</span><span class="token" style="color:#81A1C1">(</span><span class="token" style="color:#81A1C1">)</span><span class="token" style="color:#81A1C1">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">4</span>  
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">5</span><span>  </span><span class="token" style="color:#636f88">// Update pitch</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">6</span><span>  </span><span class="token" style="color:#81A1C1">const</span><span> FRotator</span><span class="token" style="color:#81A1C1">&amp;</span><span> CameraRotation </span><span class="token" style="color:#81A1C1">=</span><span> CameraComponent</span><span class="token" style="color:#81A1C1">-&gt;</span><span class="token" style="color:#88C0D0">GetComponentRotation</span><span class="token" style="color:#81A1C1">(</span><span class="token" style="color:#81A1C1">)</span><span class="token" style="color:#81A1C1">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">7</span><span>  </span><span class="token" style="color:#81A1C1">const</span><span> </span><span class="token" style="color:#81A1C1">float</span><span> NewPitch </span><span class="token" style="color:#81A1C1">=</span><span> </span><span class="token" style="color:#88C0D0">FMath</span><span class="token double-colon" style="color:#81A1C1">::</span><span class="token" style="color:#88C0D0">Clamp</span><span class="token" style="color:#81A1C1">(</span><span>CameraRotation</span><span class="token" style="color:#81A1C1">.</span><span>Pitch </span><span class="token" style="color:#81A1C1">+</span><span> VectorValue</span><span class="token" style="color:#81A1C1">.</span><span>Y</span><span class="token" style="color:#81A1C1">,</span><span> CameraPitchRange</span><span class="token" style="color:#81A1C1">.</span><span>X</span><span class="token" style="color:#81A1C1">,</span><span> CameraPitchRange</span><span class="token" style="color:#81A1C1">.</span><span>Y</span><span class="token" style="color:#81A1C1">)</span><span class="token" style="color:#81A1C1">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">8</span><span>  </span><span class="token" style="color:#81A1C1">const</span><span> FRotator NewCameraRotator </span><span class="token" style="color:#81A1C1">=</span><span> </span><span class="token" style="color:#88C0D0">FRotator</span><span class="token" style="color:#81A1C1">(</span><span>NewPitch</span><span class="token" style="color:#81A1C1">,</span><span> CameraRotation</span><span class="token" style="color:#81A1C1">.</span><span>Yaw</span><span class="token" style="color:#81A1C1">,</span><span> CameraRotation</span><span class="token" style="color:#81A1C1">.</span><span>Roll</span><span class="token" style="color:#81A1C1">)</span><span class="token" style="color:#81A1C1">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">9</span><span>  CameraComponent</span><span class="token" style="color:#81A1C1">-&gt;</span><span class="token" style="color:#88C0D0">SetWorldRotation</span><span class="token" style="color:#81A1C1">(</span><span>NewCameraRotator</span><span class="token" style="color:#81A1C1">)</span><span class="token" style="color:#81A1C1">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">10</span>  
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">11</span><span>  </span><span class="token" style="color:#636f88">// Update yaw</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">12</span><span>  </span><span class="token" style="color:#81A1C1">const</span><span> FRotator</span><span class="token" style="color:#81A1C1">&amp;</span><span> ActorRotation </span><span class="token" style="color:#81A1C1">=</span><span> </span><span class="token" style="color:#88C0D0">GetActorRotation</span><span class="token" style="color:#81A1C1">(</span><span class="token" style="color:#81A1C1">)</span><span class="token" style="color:#81A1C1">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">13</span><span>  </span><span class="token" style="color:#81A1C1">const</span><span> </span><span class="token" style="color:#81A1C1">float</span><span> NewYaw </span><span class="token" style="color:#81A1C1">=</span><span> ActorRotation</span><span class="token" style="color:#81A1C1">.</span><span>Yaw </span><span class="token" style="color:#81A1C1">+</span><span> VectorValue</span><span class="token" style="color:#81A1C1">.</span><span>X</span><span class="token" style="color:#81A1C1">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">14</span><span>  </span><span class="token" style="color:#81A1C1">const</span><span> FRotator NewActorRotator </span><span class="token" style="color:#81A1C1">=</span><span> </span><span class="token" style="color:#88C0D0">FRotator</span><span class="token" style="color:#81A1C1">(</span><span>ActorRotation</span><span class="token" style="color:#81A1C1">.</span><span>Pitch</span><span class="token" style="color:#81A1C1">,</span><span> NewYaw</span><span class="token" style="color:#81A1C1">,</span><span> ActorRotation</span><span class="token" style="color:#81A1C1">.</span><span>Roll</span><span class="token" style="color:#81A1C1">)</span><span class="token" style="color:#81A1C1">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">15</span><span>  </span><span class="token" style="color:#88C0D0">SetActorRotation</span><span class="token" style="color:#81A1C1">(</span><span>NewActorRotator</span><span class="token" style="color:#81A1C1">)</span><span class="token" style="color:#81A1C1">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">16</span><span></span><span class="token" style="color:#81A1C1">}</span></code></pre></div><p class="py-2 false">You should now be able to look around with the mouse (or gamepad). Feel free to adjust the sensitivity setting in your Pawn BP.</p><video style="height:100%;max-width:100%" metadata="[object Object]" controls="" muted="" loop=""></video><p class="py-2 false">(I&#x27;ve added a cube &quot;arm&quot; to the camera component of our Pawn to help visualize, as well as created a map to test future features).</p><h1 class="font-display text-4xl pt-6">Move function</h1><p class="py-2 false">Next up is the Move function. The Pawn implementation is very minimal; most of the logic lies in the Movement Component.</p><p class="py-2 false">The Pawn implementation only needs to transform our local-space XY input into world-space for our movement component to consume. The code looks like this:</p><div class="border-snow-storm-0 dark:border-polar-night-1 border-2 rounded flex flex-col gap-1 my-2"><span class="text-polar-night-3 mx-2">cpp</span><pre style="color:#f8f8f2;background:#2E3440;font-family:&quot;Fira Code&quot;, Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0;overflow:auto;border-radius:0"><code class="language-cpp" style="color:#f8f8f2;background:none;font-family:&quot;Fira Code&quot;, Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">1</span><span class="token" style="color:#81A1C1">void</span><span> </span><span class="token" style="color:#88C0D0">ACactusPlayerPawn</span><span class="token double-colon" style="color:#81A1C1">::</span><span class="token" style="color:#88C0D0">OnInput_Move</span><span class="token" style="color:#81A1C1">(</span><span class="token" style="color:#81A1C1">const</span><span> FInputActionValue</span><span class="token" style="color:#81A1C1">&amp;</span><span> Value</span><span class="token" style="color:#81A1C1">)</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">2</span><span></span><span class="token" style="color:#81A1C1">{</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">3</span><span>  </span><span class="token" style="color:#81A1C1">const</span><span> FVector2D RawInput </span><span class="token" style="color:#81A1C1">=</span><span> Value</span><span class="token" style="color:#81A1C1">.</span><span class="token generic-function" style="color:#88C0D0">Get</span><span class="token generic-function generic" style="color:#81A1C1">&lt;</span><span class="token generic-function generic" style="color:#88C0D0">FVector2D</span><span class="token generic-function generic" style="color:#81A1C1">&gt;</span><span class="token" style="color:#81A1C1">(</span><span class="token" style="color:#81A1C1">)</span><span class="token" style="color:#81A1C1">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">4</span><span>  </span><span class="token" style="color:#81A1C1">const</span><span> FVector ForwardInput </span><span class="token" style="color:#81A1C1">=</span><span> RawInput</span><span class="token" style="color:#81A1C1">.</span><span>X </span><span class="token" style="color:#81A1C1">*</span><span> </span><span class="token" style="color:#88C0D0">GetActorForwardVector</span><span class="token" style="color:#81A1C1">(</span><span class="token" style="color:#81A1C1">)</span><span class="token" style="color:#81A1C1">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">5</span><span>  </span><span class="token" style="color:#81A1C1">const</span><span> FVector RightInput </span><span class="token" style="color:#81A1C1">=</span><span> RawInput</span><span class="token" style="color:#81A1C1">.</span><span>Y </span><span class="token" style="color:#81A1C1">*</span><span> </span><span class="token" style="color:#88C0D0">GetActorRightVector</span><span class="token" style="color:#81A1C1">(</span><span class="token" style="color:#81A1C1">)</span><span class="token" style="color:#81A1C1">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">6</span><span>  </span><span class="token" style="color:#88C0D0">AddMovementInput</span><span class="token" style="color:#81A1C1">(</span><span>ForwardInput </span><span class="token" style="color:#81A1C1">+</span><span> RightInput</span><span class="token" style="color:#81A1C1">)</span><span class="token" style="color:#81A1C1">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">7</span><span></span><span class="token" style="color:#81A1C1">}</span></code></pre></div><p class="py-2 false"><code class="px-1 rounded-sm bg-snow-storm-0 dark:bg-polar-night-2">AddMovementInput</code> is a Pawn function that automatically pipes the input through to the first available Movement Component, which in our case is our <code class="px-1 rounded-sm bg-snow-storm-0 dark:bg-polar-night-2">USimpleMovementComponent</code> that we&#x27;ve created in our Pawn constructor.</p><h1 class="font-display text-4xl pt-6">Movement Component</h1><p class="py-2 false">Let&#x27;s move on to the Movement Component.</p><p class="py-2 false">First we need to override its tick function, which is the function that gets called every frame. Add to your Movement Component header file:</p><div class="border-snow-storm-0 dark:border-polar-night-1 border-2 rounded flex flex-col gap-1 my-2"><span class="text-polar-night-3 mx-2">cpp</span><pre style="color:#f8f8f2;background:#2E3440;font-family:&quot;Fira Code&quot;, Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0;overflow:auto;border-radius:0"><code class="language-cpp" style="color:#f8f8f2;background:none;font-family:&quot;Fira Code&quot;, Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">1</span><span class="token" style="color:#81A1C1">public</span><span class="token" style="color:#81A1C1">:</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">2</span><span>  </span><span class="token" style="color:#81A1C1">virtual</span><span> </span><span class="token" style="color:#81A1C1">void</span><span> </span><span class="token" style="color:#88C0D0">TickComponent</span><span class="token" style="color:#81A1C1">(</span><span class="token" style="color:#81A1C1">float</span><span> DeltaTime</span><span class="token" style="color:#81A1C1">,</span><span> ELevelTick TickType</span><span class="token" style="color:#81A1C1">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">3</span><span>                             FActorComponentTickFunction</span><span class="token" style="color:#81A1C1">*</span><span> ThisTickFunction</span><span class="token" style="color:#81A1C1">)</span><span> </span><span class="token" style="color:#81A1C1">override</span><span class="token" style="color:#81A1C1">;</span></code></pre></div><p class="py-2 false">Then add the implementation. Inside we need to add a few sanity checks before running the main logic:</p><div class="border-snow-storm-0 dark:border-polar-night-1 border-2 rounded flex flex-col gap-1 my-2"><span class="text-polar-night-3 mx-2">cpp</span><pre style="color:#f8f8f2;background:#2E3440;font-family:&quot;Fira Code&quot;, Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0;overflow:auto;border-radius:0"><code class="language-cpp" style="color:#f8f8f2;background:none;font-family:&quot;Fira Code&quot;, Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">1</span><span class="token" style="color:#81A1C1">void</span><span> </span><span class="token" style="color:#88C0D0">USimpleMovementComponent</span><span class="token double-colon" style="color:#81A1C1">::</span><span class="token" style="color:#88C0D0">TickComponent</span><span class="token" style="color:#81A1C1">(</span><span class="token" style="color:#81A1C1">float</span><span> DeltaTime</span><span class="token" style="color:#81A1C1">,</span><span> ELevelTick TickType</span><span class="token" style="color:#81A1C1">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">2</span><span>                                             FActorComponentTickFunction</span><span class="token" style="color:#81A1C1">*</span><span> ThisTickFunction</span><span class="token" style="color:#81A1C1">)</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">3</span><span></span><span class="token" style="color:#81A1C1">{</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">4</span><span>  </span><span class="token" style="color:#88C0D0">Super</span><span class="token double-colon" style="color:#81A1C1">::</span><span class="token" style="color:#88C0D0">TickComponent</span><span class="token" style="color:#81A1C1">(</span><span>DeltaTime</span><span class="token" style="color:#81A1C1">,</span><span> TickType</span><span class="token" style="color:#81A1C1">,</span><span> ThisTickFunction</span><span class="token" style="color:#81A1C1">)</span><span class="token" style="color:#81A1C1">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">5</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">6</span><span>  </span><span class="token" style="color:#81A1C1">if</span><span> </span><span class="token" style="color:#81A1C1">(</span><span class="token" style="color:#88C0D0">ShouldSkipUpdate</span><span class="token" style="color:#81A1C1">(</span><span>DeltaTime</span><span class="token" style="color:#81A1C1">)</span><span class="token" style="color:#81A1C1">)</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">7</span><span>  </span><span class="token" style="color:#81A1C1">{</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">8</span><span>    </span><span class="token" style="color:#81A1C1">return</span><span class="token" style="color:#81A1C1">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">9</span><span>  </span><span class="token" style="color:#81A1C1">}</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">10</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">11</span><span>  </span><span class="token" style="color:#81A1C1">if</span><span> </span><span class="token" style="color:#81A1C1">(</span><span class="token" style="color:#81A1C1">!</span><span>PawnOwner </span><span class="token" style="color:#81A1C1">||</span><span> </span><span class="token" style="color:#81A1C1">!</span><span>UpdatedComponent</span><span class="token" style="color:#81A1C1">)</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">12</span><span>  </span><span class="token" style="color:#81A1C1">{</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">13</span><span>    </span><span class="token" style="color:#81A1C1">return</span><span class="token" style="color:#81A1C1">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">14</span><span>  </span><span class="token" style="color:#81A1C1">}</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">15</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">16</span><span>  </span><span class="token" style="color:#636f88">// Handle movement</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">17</span><span></span><span class="token" style="color:#81A1C1">}</span></code></pre></div><p class="py-2 false">Now we&#x27;re ready to start moving.</p><p class="py-2 false">A Movement Component already has access to the root component it manages (in our case our Pawn Capsule Component) in the form of the variable <code class="px-1 rounded-sm bg-snow-storm-0 dark:bg-polar-night-2">UpdatedComponent</code>.  The component can be manipulated directly, but the Movement Component also has access to many helpful functions. One important function is <code class="px-1 rounded-sm bg-snow-storm-0 dark:bg-polar-night-2">MoveUpdatedComponent</code> which as the name implies handles moving it.</p><p class="py-2 false">A Movement Component also has a variable called <code class="px-1 rounded-sm bg-snow-storm-0 dark:bg-polar-night-2">Velocity</code> which can be used to calculate movement. It is helpful to treat it as actual physics velocity. Since Unreal Units (UU) are equivalent of centimeters, we&#x27;ll use velocity as UU/s.</p><p class="py-2 false">When we&#x27;re working with the velocity variable we also need to call <code class="px-1 rounded-sm bg-snow-storm-0 dark:bg-polar-night-2">UpdateComponentVelocity()</code> at the end of a tick to handle the changes internally.</p><p class="py-2 false">First we need to grab our input provided previously in our Pawn by <code class="px-1 rounded-sm bg-snow-storm-0 dark:bg-polar-night-2">AddMovementInput()</code>. This is done by calling <code class="px-1 rounded-sm bg-snow-storm-0 dark:bg-polar-night-2">ConsumeInputVector()</code>.</p><div class="border-snow-storm-0 dark:border-polar-night-1 border-2 rounded flex flex-col gap-1 my-2"><span class="text-polar-night-3 mx-2">cpp</span><pre style="color:#f8f8f2;background:#2E3440;font-family:&quot;Fira Code&quot;, Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0;overflow:auto;border-radius:0"><code class="language-cpp" style="color:#f8f8f2;background:none;font-family:&quot;Fira Code&quot;, Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">1</span><span class="token" style="color:#81A1C1">const</span><span> FVector</span><span class="token" style="color:#81A1C1">&amp;</span><span> Input </span><span class="token" style="color:#81A1C1">=</span><span> </span><span class="token" style="color:#88C0D0">ConsumeInputVector</span><span class="token" style="color:#81A1C1">(</span><span class="token" style="color:#81A1C1">)</span><span class="token" style="color:#81A1C1">.</span><span class="token" style="color:#88C0D0">GetClampedToMaxSize2D</span><span class="token" style="color:#81A1C1">(</span><span class="token" style="color:#B48EAD">1.0f</span><span class="token" style="color:#81A1C1">)</span><span class="token" style="color:#81A1C1">;</span></code></pre></div><blockquote class="bg-snow-storm-0 dark:bg-polar-night-1 border-l-4 border-l-polar-night-0 dark:border-l-snow-storm-0 px-4 py-2 my-2"><p class="py-2 false">Note: the reason we clamp it is because otherwise we the magnitude larger than1 when moving diagonally, which will make us exceed our max speed (by ~1.4x or the square root of 2). This is less pronounced with a gamepad than with WASD because of how the joystick works but still present.</p><p class="py-2 false">This is actually in many older FPS games, and often considered a useful technique when speedrunning for example, so if you want that you can keep it. Otherwise we simply need to clamp the max size of our input vector.</p></blockquote><p class="py-2 false">This input is then used to calculate a directional force, scaled by our desired movement speed.</p><div class="border-snow-storm-0 dark:border-polar-night-1 border-2 rounded flex flex-col gap-1 my-2"><span class="text-polar-night-3 mx-2">cpp</span><pre style="color:#f8f8f2;background:#2E3440;font-family:&quot;Fira Code&quot;, Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0;overflow:auto;border-radius:0"><code class="language-cpp" style="color:#f8f8f2;background:none;font-family:&quot;Fira Code&quot;, Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">1</span><span class="token" style="color:#81A1C1">const</span><span> FVector DesiredInputForce </span><span class="token" style="color:#81A1C1">=</span><span> Input </span><span class="token" style="color:#81A1C1">*</span><span> MoveSpeed</span><span class="token" style="color:#81A1C1">;</span></code></pre></div><p class="py-2 false"><code class="px-1 rounded-sm bg-snow-storm-0 dark:bg-polar-night-2">MoveSpeed</code> is just a float that has been added to our Movement Component. The value equals how many Unreal units we move per second (cm/s). It is helpful to expose it as a <code class="px-1 rounded-sm bg-snow-storm-0 dark:bg-polar-night-2">UPROPERTY</code> variable so we can change it in the editor. I&#x27;ve also added a constructor to set a default value:</p><div class="border-snow-storm-0 dark:border-polar-night-1 border-2 rounded flex flex-col gap-1 my-2"><span class="text-polar-night-3 mx-2">cpp</span><pre style="color:#f8f8f2;background:#2E3440;font-family:&quot;Fira Code&quot;, Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0;overflow:auto;border-radius:0"><code class="language-cpp" style="color:#f8f8f2;background:none;font-family:&quot;Fira Code&quot;, Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">1</span><span class="token" style="color:#81A1C1">public</span><span class="token" style="color:#81A1C1">:</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">2</span><span>  </span><span class="token" style="color:#88C0D0">UPROPERTY</span><span class="token" style="color:#81A1C1">(</span><span>EditAnywhere</span><span class="token" style="color:#81A1C1">,</span><span> Category</span><span class="token" style="color:#81A1C1">=</span><span class="token" style="color:#A3BE8C">&quot;Movement&quot;</span><span class="token" style="color:#81A1C1">)</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">3</span><span>  </span><span class="token" style="color:#81A1C1">float</span><span> MoveSpeed</span><span class="token" style="color:#81A1C1">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">4</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">5</span><span>  </span><span class="token" style="color:#88C0D0">USimpleMovementComponent</span><span class="token" style="color:#81A1C1">(</span><span class="token" style="color:#81A1C1">)</span><span class="token" style="color:#81A1C1">;</span></code></pre></div><div class="border-snow-storm-0 dark:border-polar-night-1 border-2 rounded flex flex-col gap-1 my-2"><span class="text-polar-night-3 mx-2">cpp</span><pre style="color:#f8f8f2;background:#2E3440;font-family:&quot;Fira Code&quot;, Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0;overflow:auto;border-radius:0"><code class="language-cpp" style="color:#f8f8f2;background:none;font-family:&quot;Fira Code&quot;, Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">1</span><span class="token" style="color:#88C0D0">USimpleMovementComponent</span><span class="token double-colon" style="color:#81A1C1">::</span><span class="token" style="color:#88C0D0">USimpleMovementComponent</span><span class="token" style="color:#81A1C1">(</span><span class="token" style="color:#81A1C1">)</span><span class="token" style="color:#81A1C1">:</span><span> </span><span class="token" style="color:#88C0D0">MoveSpeed</span><span class="token" style="color:#81A1C1">(</span><span class="token" style="color:#B48EAD">600.0f</span><span class="token" style="color:#81A1C1">)</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">2</span><span></span><span class="token" style="color:#81A1C1">{</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">3</span><span></span><span class="token" style="color:#81A1C1">}</span></code></pre></div><p class="py-2 false">The resulting <code class="px-1 rounded-sm bg-snow-storm-0 dark:bg-polar-night-2">DesiredInputForce</code> is then added to our <code class="px-1 rounded-sm bg-snow-storm-0 dark:bg-polar-night-2">Velocity</code>, and we calculate a new vector, <code class="px-1 rounded-sm bg-snow-storm-0 dark:bg-polar-night-2">MovementDelta</code> which will equal how much we move <em>this tick</em>:</p><div class="border-snow-storm-0 dark:border-polar-night-1 border-2 rounded flex flex-col gap-1 my-2"><span class="text-polar-night-3 mx-2">cpp</span><pre style="color:#f8f8f2;background:#2E3440;font-family:&quot;Fira Code&quot;, Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0;overflow:auto;border-radius:0"><code class="language-cpp" style="color:#f8f8f2;background:none;font-family:&quot;Fira Code&quot;, Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">1</span><span>Velocity </span><span class="token" style="color:#81A1C1">+=</span><span> DesiredInputForce</span><span class="token" style="color:#81A1C1">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">2</span><span></span><span class="token" style="color:#81A1C1">const</span><span> FVector MovementDelta </span><span class="token" style="color:#81A1C1">=</span><span> Velocity </span><span class="token" style="color:#81A1C1">*</span><span> DeltaTime</span><span class="token" style="color:#81A1C1">;</span></code></pre></div><p class="py-2 false">We then call the relevant functions to update our actual location.</p><div class="border-snow-storm-0 dark:border-polar-night-1 border-2 rounded flex flex-col gap-1 my-2"><span class="text-polar-night-3 mx-2">cpp</span><pre style="color:#f8f8f2;background:#2E3440;font-family:&quot;Fira Code&quot;, Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0;overflow:auto;border-radius:0"><code class="language-cpp" style="color:#f8f8f2;background:none;font-family:&quot;Fira Code&quot;, Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">1</span><span class="token" style="color:#81A1C1">const</span><span> FRotator</span><span class="token" style="color:#81A1C1">&amp;</span><span> Rotation </span><span class="token" style="color:#81A1C1">=</span><span> UpdatedComponent</span><span class="token" style="color:#81A1C1">-&gt;</span><span class="token" style="color:#88C0D0">GetComponentRotation</span><span class="token" style="color:#81A1C1">(</span><span class="token" style="color:#81A1C1">)</span><span class="token" style="color:#81A1C1">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">2</span><span></span><span class="token" style="color:#88C0D0">MoveUpdatedComponent</span><span class="token" style="color:#81A1C1">(</span><span>MovementDelta</span><span class="token" style="color:#81A1C1">,</span><span> Rotation</span><span class="token" style="color:#81A1C1">,</span><span> </span><span class="token" style="color:#81A1C1">false</span><span class="token" style="color:#81A1C1">)</span><span class="token" style="color:#81A1C1">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">3</span><span></span><span class="token" style="color:#88C0D0">UpdateComponentVelocity</span><span class="token" style="color:#81A1C1">(</span><span class="token" style="color:#81A1C1">)</span><span class="token" style="color:#81A1C1">;</span></code></pre></div><p class="py-2 false">Note that <code class="px-1 rounded-sm bg-snow-storm-0 dark:bg-polar-night-2">MoveUpdatedComponent</code> requires a rotation as well, so we just grab our current rotation.</p><p class="py-2 false">Finally we also need to clear our <code class="px-1 rounded-sm bg-snow-storm-0 dark:bg-polar-night-2">Velocity</code> at the start of a tick so that it doesn&#x27;t accumulate, since we won&#x27;t be implementing friction/deceleration right now.</p><div class="border-snow-storm-0 dark:border-polar-night-1 border-2 rounded flex flex-col gap-1 my-2"><span class="text-polar-night-3 mx-2">cpp</span><pre style="color:#f8f8f2;background:#2E3440;font-family:&quot;Fira Code&quot;, Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0;overflow:auto;border-radius:0"><code class="language-cpp" style="color:#f8f8f2;background:none;font-family:&quot;Fira Code&quot;, Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">1</span><span>Velocity</span><span class="token" style="color:#81A1C1">.</span><span>X </span><span class="token" style="color:#81A1C1">=</span><span> </span><span class="token" style="color:#B48EAD">0</span><span class="token" style="color:#81A1C1">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">2</span><span>Velocity</span><span class="token" style="color:#81A1C1">.</span><span>Y </span><span class="token" style="color:#81A1C1">=</span><span> </span><span class="token" style="color:#B48EAD">0</span><span class="token" style="color:#81A1C1">;</span></code></pre></div><p class="py-2 false">The final tick function looks like this:</p><div class="border-snow-storm-0 dark:border-polar-night-1 border-2 rounded flex flex-col gap-1 my-2"><span class="text-polar-night-3 mx-2">cpp</span><pre style="color:#f8f8f2;background:#2E3440;font-family:&quot;Fira Code&quot;, Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0;overflow:auto;border-radius:0"><code class="language-cpp" style="color:#f8f8f2;background:none;font-family:&quot;Fira Code&quot;, Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">1</span><span class="token" style="color:#81A1C1">void</span><span> </span><span class="token" style="color:#88C0D0">USimpleMovementComponent</span><span class="token double-colon" style="color:#81A1C1">::</span><span class="token" style="color:#88C0D0">TickComponent</span><span class="token" style="color:#81A1C1">(</span><span class="token" style="color:#81A1C1">float</span><span> DeltaTime</span><span class="token" style="color:#81A1C1">,</span><span> ELevelTick TickType</span><span class="token" style="color:#81A1C1">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">2</span><span>                                             FActorComponentTickFunction</span><span class="token" style="color:#81A1C1">*</span><span> ThisTickFunction</span><span class="token" style="color:#81A1C1">)</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">3</span><span></span><span class="token" style="color:#81A1C1">{</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">4</span><span>  </span><span class="token" style="color:#88C0D0">Super</span><span class="token double-colon" style="color:#81A1C1">::</span><span class="token" style="color:#88C0D0">TickComponent</span><span class="token" style="color:#81A1C1">(</span><span>DeltaTime</span><span class="token" style="color:#81A1C1">,</span><span> TickType</span><span class="token" style="color:#81A1C1">,</span><span> ThisTickFunction</span><span class="token" style="color:#81A1C1">)</span><span class="token" style="color:#81A1C1">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">5</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">6</span><span>  </span><span class="token" style="color:#81A1C1">if</span><span> </span><span class="token" style="color:#81A1C1">(</span><span class="token" style="color:#88C0D0">ShouldSkipUpdate</span><span class="token" style="color:#81A1C1">(</span><span>DeltaTime</span><span class="token" style="color:#81A1C1">)</span><span class="token" style="color:#81A1C1">)</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">7</span><span>  </span><span class="token" style="color:#81A1C1">{</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">8</span><span>    </span><span class="token" style="color:#81A1C1">return</span><span class="token" style="color:#81A1C1">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">9</span><span>  </span><span class="token" style="color:#81A1C1">}</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">10</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">11</span><span>  </span><span class="token" style="color:#81A1C1">if</span><span> </span><span class="token" style="color:#81A1C1">(</span><span class="token" style="color:#81A1C1">!</span><span>PawnOwner </span><span class="token" style="color:#81A1C1">||</span><span> </span><span class="token" style="color:#81A1C1">!</span><span>UpdatedComponent</span><span class="token" style="color:#81A1C1">)</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">12</span><span>  </span><span class="token" style="color:#81A1C1">{</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">13</span><span>    </span><span class="token" style="color:#81A1C1">return</span><span class="token" style="color:#81A1C1">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">14</span><span>  </span><span class="token" style="color:#81A1C1">}</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">15</span>  
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">16</span><span>  </span><span class="token" style="color:#636f88">// Reset velocity</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">17</span><span>  Velocity</span><span class="token" style="color:#81A1C1">.</span><span>X </span><span class="token" style="color:#81A1C1">=</span><span> </span><span class="token" style="color:#B48EAD">0</span><span class="token" style="color:#81A1C1">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">18</span><span>  Velocity</span><span class="token" style="color:#81A1C1">.</span><span>Y </span><span class="token" style="color:#81A1C1">=</span><span> </span><span class="token" style="color:#B48EAD">0</span><span class="token" style="color:#81A1C1">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">19</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">20</span><span>  </span><span class="token" style="color:#636f88">// Calculate force</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">21</span><span>  </span><span class="token" style="color:#81A1C1">const</span><span> FVector</span><span class="token" style="color:#81A1C1">&amp;</span><span> Input </span><span class="token" style="color:#81A1C1">=</span><span> </span><span class="token" style="color:#88C0D0">ConsumeInputVector</span><span class="token" style="color:#81A1C1">(</span><span class="token" style="color:#81A1C1">)</span><span class="token" style="color:#81A1C1">.</span><span class="token" style="color:#88C0D0">GetClampedToMaxSize2D</span><span class="token" style="color:#81A1C1">(</span><span class="token" style="color:#B48EAD">1.0f</span><span class="token" style="color:#81A1C1">)</span><span class="token" style="color:#81A1C1">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">22</span><span>  </span><span class="token" style="color:#81A1C1">const</span><span> FVector DesiredInputForce </span><span class="token" style="color:#81A1C1">=</span><span> Input </span><span class="token" style="color:#81A1C1">*</span><span> MoveSpeed</span><span class="token" style="color:#81A1C1">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">23</span><span>  Velocity </span><span class="token" style="color:#81A1C1">+=</span><span> DesiredInputForce</span><span class="token" style="color:#81A1C1">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">24</span><span>  </span><span class="token" style="color:#81A1C1">const</span><span> FVector MovementDelta </span><span class="token" style="color:#81A1C1">=</span><span> Velocity </span><span class="token" style="color:#81A1C1">*</span><span> DeltaTime</span><span class="token" style="color:#81A1C1">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">25</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">26</span><span>  </span><span class="token" style="color:#636f88">// Move</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">27</span><span>  </span><span class="token" style="color:#81A1C1">const</span><span> FRotator</span><span class="token" style="color:#81A1C1">&amp;</span><span> Rotation </span><span class="token" style="color:#81A1C1">=</span><span> UpdatedComponent</span><span class="token" style="color:#81A1C1">-&gt;</span><span class="token" style="color:#88C0D0">GetComponentRotation</span><span class="token" style="color:#81A1C1">(</span><span class="token" style="color:#81A1C1">)</span><span class="token" style="color:#81A1C1">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">28</span><span>  </span><span class="token" style="color:#88C0D0">MoveUpdatedComponent</span><span class="token" style="color:#81A1C1">(</span><span>MovementDelta</span><span class="token" style="color:#81A1C1">,</span><span> Rotation</span><span class="token" style="color:#81A1C1">,</span><span> </span><span class="token" style="color:#81A1C1">false</span><span class="token" style="color:#81A1C1">)</span><span class="token" style="color:#81A1C1">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">29</span><span>  </span><span class="token" style="color:#88C0D0">UpdateComponentVelocity</span><span class="token" style="color:#81A1C1">(</span><span class="token" style="color:#81A1C1">)</span><span class="token" style="color:#81A1C1">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">30</span><span></span><span class="token" style="color:#81A1C1">}</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#636f88">31</span></code></pre></div><h1 class="font-display text-4xl pt-6">Results</h1><p class="py-2 false">We should be able to move around! However we are currently levitating and we can move through walls 👻.</p><video style="height:100%;max-width:100%" metadata="[object Object]" controls="" muted="" loop=""></video></div><div class="flex"><div class="grow text-left"><a class="text-frost-3 dark:text-frost-1 hover:opacity-50 active:opacity-75" href="/tutorial/character-movement-from-scratch-pt-1-introduction-and-setup/">« <!-- -->pt 1: Introduction and Setup</a></div><div class="grow text-right"><a class="text-frost-3 dark:text-frost-1 hover:opacity-50 active:opacity-75" href="/tutorial/character-movement-from-scratch-pt-3-collision/">pt 3: Collision<!-- --> »</a></div></div></div><div class="h-[1px] w-full opacity-10 bg-polar-night-0 dark:bg-snow-storm-2"></div></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"siteMetainfo":{"headerTitle":"Ljung","headerSubtitle":".dev","pageTitlePrefix":"Ljung | "},"_site":{"globalSeo":{"siteName":"Ljung","fallbackSeo":{"title":"Ljung | Game Dev","description":"Indie Game Developer from Sweden 🎮"}}},"post":{"title":"Character Movement from Scratch pt 2: Basic Movement","description":"In this part we implement input handling and very basic movement.","seriesPrevious":{"slug":"character-movement-from-scratch-pt-1-introduction-and-setup","seriesTitle":"pt 1: Introduction and Setup"},"seriesNext":{"slug":"character-movement-from-scratch-pt-3-collision","seriesTitle":"pt 3: Collision"},"content":{"value":{"schema":"dast","document":{"type":"root","children":[{"type":"blockquote","children":[{"type":"paragraph","children":[{"type":"span","value":"Note: Any code shown is made with Unreal Engine in mind, but the general concepts should be applicable to most 3D-engines."}]}]},{"type":"blockquote","children":[{"type":"paragraph","children":[{"type":"span","value":"A project using this tutorial series is "},{"url":"https://github.com/LjungDev/Cactus","meta":[{"id":"target","value":"_blank"}],"type":"link","children":[{"type":"span","value":"tracked on GitHub"}]},{"type":"span","value":". The revision after this part is "},{"url":"https://github.com/LjungDev/Cactus/commit/82350b1802a76d11891753d2e8c0f93f0cab6367","meta":[{"id":"target","value":"_blank"}],"type":"link","children":[{"type":"span","value":"82350b1"}]},{"type":"span","value":"."}]}]},{"type":"paragraph","children":[{"type":"span","value":"Hej!"}]},{"type":"paragraph","children":[{"type":"span","value":"In this first part of diving into the movement code, we'll be implementing basic forward/backward/strafing movement as well as camera look. We still have some input-handling boilerplate to go through but we'll start with just the bare minimum so no collision or gravity yet."}]},{"type":"paragraph","children":[{"type":"span","value":"It is fairly straightforward. The logic goes:"}]},{"type":"list","style":"numbered","children":[{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"Grab our desired input in a format we can understand"}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"Translate that input into a direction that is relative to the player pawn's rotation"}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"Pass the input to the movement component"}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"Consume the input in the movement component"}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"Derive a world-space delta to apply based on input and movement speed"}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"Move our player pawn by the calculated delta"}]}]}]},{"type":"paragraph","children":[{"type":"span","value":"The first part is probably the more complex as we have to setup our input bindings first."}]},{"type":"heading","level":1,"children":[{"type":"span","value":"Input Bindings"}]},{"type":"paragraph","children":[{"type":"span","value":"This section will double down as a crash course in Enhanced Input. Without going into too much detail, the main difference between Enhanced Input and a traditional input binding that you might be familiar with is that Enhanced Input takes common operations that are usually expressed in code and abstracts them into configurable objects. Things like handling raw input, deadzones, hold time, rapid firing etc. can be customized through dropdowns instead of code."}]},{"type":"paragraph","children":[{"type":"span","value":"You can read more about it on "},{"url":"https://docs.unrealengine.com/4.26/en-US/InteractiveExperiences/Input/EnhancedInput/","meta":[{"id":"target","value":"_blank"}],"type":"link","children":[{"type":"span","value":"the docs here"}]},{"type":"span","value":"."}]},{"type":"paragraph","children":[{"type":"span","value":"An abstract action that we want to handle (\"move\", \"jump\", \"shoot\") are configured as Input Action objects. The object that binds concrete input (e.g. the \"W\" key) to an action is an Input Mapping Context object. There are some extra layers to this but that is what we're going to use in our basic scenario. "}]},{"type":"paragraph","children":[{"type":"span","value":"We need two input actions: Move, and Look."}]},{"type":"paragraph","children":[{"type":"span","value":"Right-click an area of your choice in the Content Drawer and add two actions:"}]},{"item":"55082369","type":"block"},{"type":"paragraph","children":[{"type":"span","value":"I named them "},{"type":"span","marks":["code"],"value":"IA_Move"},{"type":"span","value":" and "},{"type":"span","marks":["code"],"value":"IA_Look"},{"type":"span","value":". "}]},{"type":"paragraph","children":[{"type":"span","value":"Open "},{"type":"span","marks":["code"],"value":"IA_Move"},{"type":"span","value":" and set "},{"type":"span","marks":["code"],"value":"Value Type"},{"type":"span","value":" to "},{"type":"span","marks":["code"],"value":"Axis2D (Vector2D)"},{"type":"span","value":". "}]},{"type":"paragraph","children":[{"type":"span","value":"Do the same for "},{"type":"span","marks":["code"],"value":"IA_Look"},{"type":"span","value":"."}]},{"type":"paragraph","children":[{"type":"span","value":"Next right-click again and create an Input Mapping Context object. I named mine "},{"type":"span","marks":["code"],"value":"IMC_Default"},{"type":"span","value":"."}]},{"type":"paragraph","children":[{"type":"span","value":"Open it and add a mapping for "},{"type":"span","marks":["code"],"value":"IA_Move"},{"type":"span","value":". Then add control bindings for whatever inputs you want to handle. For this tutorial I'm adding WASD and "},{"type":"span","marks":["code"],"value":"Gamepad Left Thumbstick 2D-Axis"},{"type":"span","value":". The idea is to make input mappings so that the final value (the Vector2D value type) has X representing forward (positive) and backward (negative) movement, and Y representing right (positive) and left (negative) movement. To accomplish this for WASD we need to add a few swizzles and negates which is out of this scope, but the result should look like this:"}]},{"item":"55423801","type":"block"},{"type":"paragraph","children":[{"type":"span","value":"(Dead zone is added to prevent the neutral position from drifting for gamepads.)"}]},{"type":"paragraph","children":[{"type":"span","value":"Add another mapping entry for IA_Look. This entry is much simpler as we can directly use the input values for mouse XY and the right thumbstick for gamepads. The idea here is that the X-axis represents yaw (left-right) and the Y-axis represents pitch (up-down). It should look like this:"}]},{"item":"55082371","type":"block"},{"type":"heading","level":1,"children":[{"type":"span","value":"Input Handling"}]},{"type":"paragraph","children":[{"type":"span","value":"We can now move over to the code that will utilize these objects."}]},{"type":"paragraph","children":[{"type":"span","value":"First, to access Enhanced Input in C++ we need to add it to our build script. Open your Build.cs (mine is located as "},{"type":"span","marks":["code"],"value":"Source/Cactus/Cactus.Build.cs"},{"type":"span","value":") and add \"EnhancedInput\" to the public dependencies:"}]},{"code":"PublicDependencyModuleNames.AddRange(new string[]\n  {\"Core\", \"CoreUObject\", \"Engine\", \"InputCore\", \"EnhancedInput\"});","type":"code","language":"csharp"},{"type":"paragraph","children":[{"type":"span","value":"(You may need to regenerate project files after doing this.)"}]},{"type":"paragraph","children":[{"type":"span","value":"Next, we need to do the following things:"}]},{"type":"list","style":"bulleted","children":[{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"Setup the Input Mapping Context object in the controller class"}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"Add the input actions as "},{"type":"span","marks":["code"],"value":"UPROPERTY"},{"type":"span","value":" fields so we can set them from the editor"}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"Add an empty (for now) Move and Look function"}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"Override "},{"type":"span","marks":["code"],"value":"SetupPlayerInputComponent"},{"type":"span","value":" to handle binding the actions to code"}]}]}]},{"type":"heading","level":2,"children":[{"type":"span","value":"Input Mapping Context"}]},{"type":"paragraph","children":[{"type":"span","value":"The idea (I think) behind mapping contexts is that you can have different contexts depending on what your doing (main gameplay, pause menu, spectator etc.) that can alter how you handle inputs. For our scenario we'll stick with a single one, and we'll let the Player Controller handle it since it seems appropriate."}]},{"type":"paragraph","children":[{"type":"span","value":"We need a property for the Input Mapping Context object that we can set from the editor, and we need to handle using it in our "},{"type":"span","marks":["code"],"value":"BeginPlay"},{"type":"span","value":" function which is called at the start of the game. In your player controller header file add to the class:"}]},{"code":"public:\n  UPROPERTY(EditDefaultsOnly)\n  class UInputMappingContext* DefaultInputMappingContext;\n  \nprotected:\n  virtual void BeginPlay() override;","type":"code","language":"cpp"},{"type":"paragraph","children":[{"type":"span","value":"Then we add the "},{"type":"span","marks":["code"],"value":"BeginPlay"},{"type":"span","value":" implementation where we fetch the Enhanced Input subsytem and set our context (we also need to include the relevant header):"}]},{"code":"#include \"CactusPlayerController.h\"\n\n#include \"EnhancedInputSubsystems.h\"\n\nvoid ACactusPlayerController::BeginPlay()\n{\n  Super::BeginPlay();\n\n  if (UEnhancedInputLocalPlayerSubsystem* Subsystem = ULocalPlayer::GetSubsystem\u003cUEnhancedInputLocalPlayerSubsystem\u003e(\n    GetLocalPlayer()))\n  {\n    Subsystem-\u003eClearAllMappings();\n    Subsystem-\u003eAddMappingContext(DefaultInputMappingContext, 0);\n  }\n}\n","type":"code","language":"cpp"},{"type":"paragraph","children":[{"type":"span","value":"That's it for the Player Controller class. Don't forget to set the context object ("},{"type":"span","marks":["code"],"value":"IMC_Default"},{"type":"span","value":") in your Player Controller BP!"}]},{"type":"heading","level":2,"children":[{"type":"span","value":"Input Action fields"}]},{"type":"paragraph","children":[{"type":"span","value":"Next up we need to add two fields of type "},{"type":"span","marks":["code"],"value":"UInputAction*"},{"type":"span","value":" for the move action and look action. Inside your player pawn header file add:"}]},{"code":"UPROPERTY(EditDefaultsOnly, Category=\"Input\")\nUInputAction* MoveAction;\n\nUPROPERTY(EditDefaultsOnly, Category=\"Input\")\nUInputAction* LookAction;","type":"code","language":"cpp"},{"type":"paragraph","children":[{"type":"span","value":"I've added them just below the component declarations, within the public scope. We also need to have "},{"type":"span","marks":["code"],"value":"UInputAction"},{"type":"span","value":" accessible. I like to forward declare them however you can also import the action header file. Above my player pawn class definition add:"}]},{"code":"class UInputAction;","type":"code","language":"cpp"},{"type":"heading","level":2,"children":[{"type":"span","value":"Stub functions"}]},{"type":"paragraph","children":[{"type":"span","value":"We need to add two functions, one for Move and one for Look. We'll implement them soon but for now we just need to get the input handling out of the way. In your pawn header add the functions to the class:"}]},{"code":"private:\n  void OnInput_Move(const FInputActionValue\u0026 Value);\n  void OnInput_Look(const FInputActionValue\u0026 Value);","type":"code","language":"cpp"},{"type":"paragraph","children":[{"type":"span","value":"We also need to forward declare "},{"type":"span","marks":["code"],"value":"FInputActionValue"},{"type":"span","value":":"}]},{"code":"struct FInputActionValue;","type":"code","language":"cpp"},{"type":"paragraph","children":[{"type":"span","value":"Then add the empty implementations to the cpp file. Optionally you can also log the input value to verify that the bindings work later on:"}]},{"code":"void ACactusPlayerPawn::OnInput_Move(const FInputActionValue\u0026 Value)\n{\n  UE_LOG(LogTemp, Log, TEXT(\"Move: %s\"), *Value.Get\u003cFVector2D\u003e().ToString());\n}\n\nvoid ACactusPlayerPawn::OnInput_Look(const FInputActionValue\u0026 Value)\n{\n  UE_LOG(LogTemp, Log, TEXT(\"Look: %s\"), *Value.Get\u003cFVector2D\u003e().ToString());\n}","type":"code","language":"cpp"},{"type":"heading","level":2,"children":[{"type":"span","value":"SetupPlayerInputComponent"}]},{"type":"paragraph","children":[{"type":"span","marks":["code"],"value":"SetupPlayerInputComponent"},{"type":"span","value":" comes from Pawn and is a protected virtual function that is called when it is time to setup any input bindings (looking at the Unreal source it probably during "},{"type":"span","marks":["code"],"value":"APawn::PawnClientRestart"},{"type":"span","value":")."}]},{"type":"paragraph","children":[{"type":"span","value":"We need to override it and add our own bindings. The base implementation is empty, but we can still call the "},{"type":"span","marks":["code"],"value":"Super"},{"type":"span","value":" variant in case that ever changes. Binding actions is similar to the built-in way except we cast the input component to the Enhanced Input variant, so it accepts our input action objects."}]},{"type":"paragraph","children":[{"type":"span","value":"In the pawn header file add:"}]},{"code":"protected:\n  virtual void SetupPlayerInputComponent(UInputComponent* PlayerInputComponent) override;","type":"code","language":"cpp"},{"type":"paragraph","children":[{"type":"span","value":"And for the cpp file add:"}]},{"code":"void ACactusPlayerPawn::SetupPlayerInputComponent(UInputComponent* PlayerInputComponent)\n{\n  Super::SetupPlayerInputComponent(PlayerInputComponent);\n\n  UEnhancedInputComponent* PlayerEnhancedInputComponent = Cast\u003cUEnhancedInputComponent\u003e(PlayerInputComponent);\n  if (PlayerEnhancedInputComponent)\n  {\n    PlayerEnhancedInputComponent-\u003eBindAction(MoveAction, ETriggerEvent::Triggered, this,\n                                             \u0026ACactusPlayerPawn::OnInput_Move);\n    PlayerEnhancedInputComponent-\u003eBindAction(LookAction, ETriggerEvent::Triggered, this,\n                                             \u0026ACactusPlayerPawn::OnInput_Look);\n  }\n}","type":"code","language":"cpp"},{"type":"heading","level":2,"children":[{"type":"span","value":"Testing"}]},{"type":"paragraph","children":[{"type":"span","value":"Everything should be ready to accept input now. Don't forget to assign the Input Mapping Context object in the Player Controller BP, and the inputs actions in the Pawn BP. If you added the log statements to the Move and Look function, try pressing WASD and moving the mouse. You should see output similar to this:"}]},{"item":"55258791","type":"block"},{"type":"paragraph","children":[{"type":"span","value":"The inputs should give these values:"}]},{"type":"list","style":"bulleted","children":[{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"W should give X=1 Y=0"}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"S should give X=-1 Y=0"}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"A should give X=0 Y=-1"}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"D should give X=0 Y=1"}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"Dragging the mouse up should give positive Y"}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"Dragging the mouse down should give negative Y"}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"Dragging the mouse right should give positive X"}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"Dragging the mouse left should give negative X"}]}]}]},{"type":"heading","level":1,"children":[{"type":"span","value":"Look function"}]},{"type":"paragraph","children":[{"type":"span","value":"We'll cover the look function first since it's simple. It involves some math but is unrelated to most things we will deal with later on."}]},{"type":"paragraph","children":[{"type":"span","value":"First we add some editor-exposed variables to adjust how our camera look works. In the pawn header add:"}]},{"code":"UPROPERTY(EditAnywhere, Category=\"Input\")\nFVector2D CameraSensitivity;\n\nUPROPERTY(EditAnywhere, Category=\"Input\")\nFVector2D CameraPitchRange;","type":"code","language":"cpp"},{"type":"paragraph","children":[{"type":"span","value":"We should also set sensible defaults in our constructor in the cpp file:"}]},{"code":"ACactusPlayerPawn::ACactusPlayerPawn(): CameraSensitivity(FVector2D(180.0f, 90.0f)),\n                                        CameraPitchRange(FVector2D(-80.0f, 80.0f))\n{\n  ...\n}","type":"code","language":"cpp"},{"type":"paragraph","children":[{"type":"span","value":"Next, we implement the Look function. The logic goes:"}]},{"type":"list","style":"numbered","children":[{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"Grab our FVector2D value"}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"Multiply it by the camera sensitivity and delta time"}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"Calculate a new pitch (up and down) value, clamped between our range"}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"Set the cameras rotation to use the new pitch"}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"Calculate a new yaw (left and right) value based on actor rotation"}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"Set actor rotation to use new yaw"}]}]}]},{"type":"paragraph","children":[{"type":"span","value":"The code looks like this:"}]},{"code":"void ACactusPlayerPawn::OnInput_Look(const FInputActionValue\u0026 Value)\n{\n  const FVector2D VectorValue = Value.Get\u003cFVector2D\u003e() * CameraSensitivity * GetWorld()-\u003eGetDeltaSeconds();\n  \n  // Update pitch\n  const FRotator\u0026 CameraRotation = CameraComponent-\u003eGetComponentRotation();\n  const float NewPitch = FMath::Clamp(CameraRotation.Pitch + VectorValue.Y, CameraPitchRange.X, CameraPitchRange.Y);\n  const FRotator NewCameraRotator = FRotator(NewPitch, CameraRotation.Yaw, CameraRotation.Roll);\n  CameraComponent-\u003eSetWorldRotation(NewCameraRotator);\n  \n  // Update yaw\n  const FRotator\u0026 ActorRotation = GetActorRotation();\n  const float NewYaw = ActorRotation.Yaw + VectorValue.X;\n  const FRotator NewActorRotator = FRotator(ActorRotation.Pitch, NewYaw, ActorRotation.Roll);\n  SetActorRotation(NewActorRotator);\n}","type":"code","language":"cpp"},{"type":"paragraph","children":[{"type":"span","value":"You should now be able to look around with the mouse (or gamepad). Feel free to adjust the sensitivity setting in your Pawn BP."}]},{"item":"55258799","type":"block"},{"type":"paragraph","children":[{"type":"span","value":"(I've added a cube \"arm\" to the camera component of our Pawn to help visualize, as well as created a map to test future features)."}]},{"type":"heading","level":1,"children":[{"type":"span","value":"Move function"}]},{"type":"paragraph","children":[{"type":"span","value":"Next up is the Move function. The Pawn implementation is very minimal; most of the logic lies in the Movement Component."}]},{"type":"paragraph","children":[{"type":"span","value":"The Pawn implementation only needs to transform our local-space XY input into world-space for our movement component to consume. The code looks like this:"}]},{"code":"void ACactusPlayerPawn::OnInput_Move(const FInputActionValue\u0026 Value)\n{\n  const FVector2D RawInput = Value.Get\u003cFVector2D\u003e();\n  const FVector ForwardInput = RawInput.X * GetActorForwardVector();\n  const FVector RightInput = RawInput.Y * GetActorRightVector();\n  AddMovementInput(ForwardInput + RightInput);\n}","type":"code","language":"cpp"},{"type":"paragraph","children":[{"type":"span","marks":["code"],"value":"AddMovementInput"},{"type":"span","value":" is a Pawn function that automatically pipes the input through to the first available Movement Component, which in our case is our "},{"type":"span","marks":["code"],"value":"USimpleMovementComponent"},{"type":"span","value":" that we've created in our Pawn constructor."}]},{"type":"heading","level":1,"children":[{"type":"span","value":"Movement Component"}]},{"type":"paragraph","children":[{"type":"span","value":"Let's move on to the Movement Component."}]},{"type":"paragraph","children":[{"type":"span","value":"First we need to override its tick function, which is the function that gets called every frame. Add to your Movement Component header file:"}]},{"code":"public:\n  virtual void TickComponent(float DeltaTime, ELevelTick TickType,\n                             FActorComponentTickFunction* ThisTickFunction) override;","type":"code","language":"cpp"},{"type":"paragraph","children":[{"type":"span","value":"Then add the implementation. Inside we need to add a few sanity checks before running the main logic:"}]},{"code":"void USimpleMovementComponent::TickComponent(float DeltaTime, ELevelTick TickType,\n                                             FActorComponentTickFunction* ThisTickFunction)\n{\n  Super::TickComponent(DeltaTime, TickType, ThisTickFunction);\n\n  if (ShouldSkipUpdate(DeltaTime))\n  {\n    return;\n  }\n\n  if (!PawnOwner || !UpdatedComponent)\n  {\n    return;\n  }\n\n  // Handle movement\n}","type":"code","language":"cpp"},{"type":"paragraph","children":[{"type":"span","value":"Now we're ready to start moving."}]},{"type":"paragraph","children":[{"type":"span","value":"A Movement Component already has access to the root component it manages (in our case our Pawn Capsule Component) in the form of the variable "},{"type":"span","marks":["code"],"value":"UpdatedComponent"},{"type":"span","value":".  The component can be manipulated directly, but the Movement Component also has access to many helpful functions. One important function is "},{"type":"span","marks":["code"],"value":"MoveUpdatedComponent"},{"type":"span","value":" which as the name implies handles moving it."}]},{"type":"paragraph","children":[{"type":"span","value":"A Movement Component also has a variable called "},{"type":"span","marks":["code"],"value":"Velocity"},{"type":"span","value":" which can be used to calculate movement. It is helpful to treat it as actual physics velocity. Since Unreal Units (UU) are equivalent of centimeters, we'll use velocity as UU/s."}]},{"type":"paragraph","children":[{"type":"span","value":"When we're working with the velocity variable we also need to call "},{"type":"span","marks":["code"],"value":"UpdateComponentVelocity()"},{"type":"span","value":" at the end of a tick to handle the changes internally."}]},{"type":"paragraph","children":[{"type":"span","value":"First we need to grab our input provided previously in our Pawn by "},{"type":"span","marks":["code"],"value":"AddMovementInput()"},{"type":"span","value":". This is done by calling "},{"type":"span","marks":["code"],"value":"ConsumeInputVector()"},{"type":"span","value":"."}]},{"code":"const FVector\u0026 Input = ConsumeInputVector().GetClampedToMaxSize2D(1.0f);","type":"code","language":"cpp"},{"type":"blockquote","children":[{"type":"paragraph","children":[{"type":"span","value":"Note: the reason we clamp it is because otherwise we the magnitude larger than1 when moving diagonally, which will make us exceed our max speed (by ~1.4x or the square root of 2). This is less pronounced with a gamepad than with WASD because of how the joystick works but still present."}]},{"type":"paragraph","children":[{"type":"span","value":"This is actually in many older FPS games, and often considered a useful technique when speedrunning for example, so if you want that you can keep it. Otherwise we simply need to clamp the max size of our input vector."}]}]},{"type":"paragraph","children":[{"type":"span","value":"This input is then used to calculate a directional force, scaled by our desired movement speed."}]},{"code":"const FVector DesiredInputForce = Input * MoveSpeed;","type":"code","language":"cpp"},{"type":"paragraph","children":[{"type":"span","marks":["code"],"value":"MoveSpeed"},{"type":"span","value":" is just a float that has been added to our Movement Component. The value equals how many Unreal units we move per second (cm/s). It is helpful to expose it as a "},{"type":"span","marks":["code"],"value":"UPROPERTY"},{"type":"span","value":" variable so we can change it in the editor. I've also added a constructor to set a default value:"}]},{"code":"public:\n  UPROPERTY(EditAnywhere, Category=\"Movement\")\n  float MoveSpeed;\n\n  USimpleMovementComponent();","type":"code","language":"cpp"},{"code":"USimpleMovementComponent::USimpleMovementComponent(): MoveSpeed(600.0f)\n{\n}","type":"code","language":"cpp"},{"type":"paragraph","children":[{"type":"span","value":"The resulting "},{"type":"span","marks":["code"],"value":"DesiredInputForce"},{"type":"span","value":" is then added to our "},{"type":"span","marks":["code"],"value":"Velocity"},{"type":"span","value":", and we calculate a new vector, "},{"type":"span","marks":["code"],"value":"MovementDelta"},{"type":"span","value":" which will equal how much we move "},{"type":"span","marks":["emphasis"],"value":"this tick"},{"type":"span","value":":"}]},{"code":"Velocity += DesiredInputForce;\nconst FVector MovementDelta = Velocity * DeltaTime;","type":"code","language":"cpp"},{"type":"paragraph","children":[{"type":"span","value":"We then call the relevant functions to update our actual location."}]},{"code":"const FRotator\u0026 Rotation = UpdatedComponent-\u003eGetComponentRotation();\nMoveUpdatedComponent(MovementDelta, Rotation, false);\nUpdateComponentVelocity();","type":"code","language":"cpp"},{"type":"paragraph","children":[{"type":"span","value":"Note that "},{"type":"span","marks":["code"],"value":"MoveUpdatedComponent"},{"type":"span","value":" requires a rotation as well, so we just grab our current rotation."}]},{"type":"paragraph","children":[{"type":"span","value":"Finally we also need to clear our "},{"type":"span","marks":["code"],"value":"Velocity"},{"type":"span","value":" at the start of a tick so that it doesn't accumulate, since we won't be implementing friction/deceleration right now."}]},{"code":"Velocity.X = 0;\nVelocity.Y = 0;","type":"code","language":"cpp"},{"type":"paragraph","children":[{"type":"span","value":"The final tick function looks like this:"}]},{"code":"void USimpleMovementComponent::TickComponent(float DeltaTime, ELevelTick TickType,\n                                             FActorComponentTickFunction* ThisTickFunction)\n{\n  Super::TickComponent(DeltaTime, TickType, ThisTickFunction);\n\n  if (ShouldSkipUpdate(DeltaTime))\n  {\n    return;\n  }\n\n  if (!PawnOwner || !UpdatedComponent)\n  {\n    return;\n  }\n  \n  // Reset velocity\n  Velocity.X = 0;\n  Velocity.Y = 0;\n\n  // Calculate force\n  const FVector\u0026 Input = ConsumeInputVector().GetClampedToMaxSize2D(1.0f);\n  const FVector DesiredInputForce = Input * MoveSpeed;\n  Velocity += DesiredInputForce;\n  const FVector MovementDelta = Velocity * DeltaTime;\n\n  // Move\n  const FRotator\u0026 Rotation = UpdatedComponent-\u003eGetComponentRotation();\n  MoveUpdatedComponent(MovementDelta, Rotation, false);\n  UpdateComponentVelocity();\n}\n","type":"code","language":"cpp"},{"type":"heading","level":1,"children":[{"type":"span","value":"Results"}]},{"type":"paragraph","children":[{"type":"span","value":"We should be able to move around! However we are currently levitating and we can move through walls 👻."}]},{"item":"55444906","type":"block"}]}},"blocks":[{"__typename":"ImageRecord","id":"55082369","image":{"responsiveImage":{"base64":"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAoHBwgHBgoICAgLChULDhQZGhkWDhEhEhENFxYZGBYVFiEdHy0vHSkoHRUWJDUlKC0vMjIyGSI4PTcwPCsxMi8BCgsLAg0OHBAQHDsoIigvLzs7Ozs7Oy87Oy8vLy8vLy87Oy87LzsvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL//AABEIAAwAGAMBIgACEQEDEQH/xAAYAAACAwAAAAAAAAAAAAAAAAADBgAEBf/EAB0QAAIDAAIDAAAAAAAAAAAAAAECAAMEETEFEiH/xAAWAQEBAQAAAAAAAAAAAAAAAAADBAL/xAAeEQABAwQDAAAAAAAAAAAAAAABAAZBAwQhUQIHEf/aAAwDAQACEQMRAD8AW9tiFPpg/HtX7dzN1WuU7lXHosF3AMqFXsmCPEfKi2DkhN74671kgMdzlByZJk3D12jNu2TC/9k=","srcSet":"https://www.datocms-assets.com/77616/1660781073-fpmfs-pt2-input-action.png?auto=format\u0026dpr=0.25\u0026max-w=600 132w,https://www.datocms-assets.com/77616/1660781073-fpmfs-pt2-input-action.png?auto=format\u0026dpr=0.5\u0026max-w=600 264w,https://www.datocms-assets.com/77616/1660781073-fpmfs-pt2-input-action.png?auto=format\u0026dpr=0.75\u0026max-w=600 396w,https://www.datocms-assets.com/77616/1660781073-fpmfs-pt2-input-action.png?auto=format\u0026max-w=600 528w","webpSrcSet":"https://www.datocms-assets.com/77616/1660781073-fpmfs-pt2-input-action.png?auto=format\u0026dpr=0.25\u0026fm=webp\u0026max-w=600 132w,https://www.datocms-assets.com/77616/1660781073-fpmfs-pt2-input-action.png?auto=format\u0026dpr=0.5\u0026fm=webp\u0026max-w=600 264w,https://www.datocms-assets.com/77616/1660781073-fpmfs-pt2-input-action.png?auto=format\u0026dpr=0.75\u0026fm=webp\u0026max-w=600 396w,https://www.datocms-assets.com/77616/1660781073-fpmfs-pt2-input-action.png?auto=format\u0026fm=webp\u0026max-w=600 528w","sizes":"(max-width: 528px) 100vw, 528px","src":"https://www.datocms-assets.com/77616/1660781073-fpmfs-pt2-input-action.png?auto=format\u0026max-w=600","alt":null,"title":null,"width":528,"height":252,"aspectRatio":2.0952380952380953}}},{"__typename":"ImageRecord","id":"55423801","image":{"responsiveImage":{"base64":"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAoHBxASBgoNEhAHBgYNDg4QDgYGDhENDQgYFxkZGBYVFhUaHysjGh0oHRUWJDUlKC0vMjIyGSI4PTcwPCsxMi8BCgsLBQUFEAUFEC8cFhwvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL//AABEIABkADgMBIgACEQEDEQH/xAAWAAEBAQAAAAAAAAAAAAAAAAADBgH/xAAbEAACAgMBAAAAAAAAAAAAAAAAAwFBIjEyAv/EABQBAQAAAAAAAAAAAAAAAAAAAAD/xAAUEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwCEd1ATaEbOcBtnQGtnINvrQjegWUB//9k=","srcSet":"https://www.datocms-assets.com/77616/1660830153-fpmfs-pt2-input-mapping.png?auto=format\u0026dpr=0.25\u0026max-w=600 155w,https://www.datocms-assets.com/77616/1660830153-fpmfs-pt2-input-mapping.png?auto=format\u0026dpr=0.5\u0026max-w=600 310w,https://www.datocms-assets.com/77616/1660830153-fpmfs-pt2-input-mapping.png?auto=format\u0026dpr=0.75\u0026max-w=600 465w,https://www.datocms-assets.com/77616/1660830153-fpmfs-pt2-input-mapping.png?auto=format\u0026max-w=600 621w","webpSrcSet":"https://www.datocms-assets.com/77616/1660830153-fpmfs-pt2-input-mapping.png?auto=format\u0026dpr=0.25\u0026fm=webp\u0026max-w=600 155w,https://www.datocms-assets.com/77616/1660830153-fpmfs-pt2-input-mapping.png?auto=format\u0026dpr=0.5\u0026fm=webp\u0026max-w=600 310w,https://www.datocms-assets.com/77616/1660830153-fpmfs-pt2-input-mapping.png?auto=format\u0026dpr=0.75\u0026fm=webp\u0026max-w=600 465w,https://www.datocms-assets.com/77616/1660830153-fpmfs-pt2-input-mapping.png?auto=format\u0026fm=webp\u0026max-w=600 621w","sizes":"(max-width: 621px) 100vw, 621px","src":"https://www.datocms-assets.com/77616/1660830153-fpmfs-pt2-input-mapping.png?auto=format\u0026max-w=600","alt":null,"title":null,"width":621,"height":1099,"aspectRatio":0.565059144676979}}},{"__typename":"ImageRecord","id":"55082371","image":{"responsiveImage":{"base64":"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAoHBwgLEAoGCg8IBgoGBw0QCQYIBxEJFgcYFxMZGBYTFhUaHysjGh0oHRUWJDUlKC0vMjIyGSI4PTcwPCsxMi8BCgsLDgsKEAoKEC8cFhwvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL//AABEIABgAGAMBIgACEQEDEQH/xAAYAAEAAwEAAAAAAAAAAAAAAAAAAQIDBv/EABgQAQEBAQEAAAAAAAAAAAAAAAACEQMB/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhEDEQA/AOHv1nqLpWaBHQR09AXtluACl0AD/9k=","srcSet":"https://www.datocms-assets.com/77616/1660830198-fpmfs-pt2-input-mapping-2.png?auto=format\u0026dpr=0.25\u0026max-w=600 153w,https://www.datocms-assets.com/77616/1660830198-fpmfs-pt2-input-mapping-2.png?auto=format\u0026dpr=0.5\u0026max-w=600 307w,https://www.datocms-assets.com/77616/1660830198-fpmfs-pt2-input-mapping-2.png?auto=format\u0026dpr=0.75\u0026max-w=600 461w,https://www.datocms-assets.com/77616/1660830198-fpmfs-pt2-input-mapping-2.png?auto=format\u0026max-w=600 615w","webpSrcSet":"https://www.datocms-assets.com/77616/1660830198-fpmfs-pt2-input-mapping-2.png?auto=format\u0026dpr=0.25\u0026fm=webp\u0026max-w=600 153w,https://www.datocms-assets.com/77616/1660830198-fpmfs-pt2-input-mapping-2.png?auto=format\u0026dpr=0.5\u0026fm=webp\u0026max-w=600 307w,https://www.datocms-assets.com/77616/1660830198-fpmfs-pt2-input-mapping-2.png?auto=format\u0026dpr=0.75\u0026fm=webp\u0026max-w=600 461w,https://www.datocms-assets.com/77616/1660830198-fpmfs-pt2-input-mapping-2.png?auto=format\u0026fm=webp\u0026max-w=600 615w","sizes":"(max-width: 615px) 100vw, 615px","src":"https://www.datocms-assets.com/77616/1660830198-fpmfs-pt2-input-mapping-2.png?auto=format\u0026max-w=600","alt":null,"title":null,"width":615,"height":602,"aspectRatio":1.021594684385382}}},{"__typename":"ImageRecord","id":"55258791","image":{"responsiveImage":{"base64":"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAoHBwgHBg4IEggNDgcHDg0HDggODhEJDRENFxUZGBYVFhUaHysjGh0oHRUiJDUlKC0vMjIyGSI4PTcwPCsxMi8BCgsLBQUFEAUFEC8cFhwvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL//AABEIAAwAGAMBIgACEQEDEQH/xAAYAAACAwAAAAAAAAAAAAAAAAAAAwEEBv/EABkQAAMBAQEAAAAAAAAAAAAAAAABAhEDBP/EABQBAQAAAAAAAAAAAAAAAAAAAAD/xAAUEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwDK9cwTK1k9qeCopgM6NSBW9FPAA//Z","srcSet":"https://www.datocms-assets.com/77616/1660822248-fpmfs-pt2-input-testing.png?auto=format\u0026dpr=0.25\u0026max-w=600 59w,https://www.datocms-assets.com/77616/1660822248-fpmfs-pt2-input-testing.png?auto=format\u0026dpr=0.5\u0026max-w=600 118w,https://www.datocms-assets.com/77616/1660822248-fpmfs-pt2-input-testing.png?auto=format\u0026dpr=0.75\u0026max-w=600 177w,https://www.datocms-assets.com/77616/1660822248-fpmfs-pt2-input-testing.png?auto=format\u0026max-w=600 237w","webpSrcSet":"https://www.datocms-assets.com/77616/1660822248-fpmfs-pt2-input-testing.png?auto=format\u0026dpr=0.25\u0026fm=webp\u0026max-w=600 59w,https://www.datocms-assets.com/77616/1660822248-fpmfs-pt2-input-testing.png?auto=format\u0026dpr=0.5\u0026fm=webp\u0026max-w=600 118w,https://www.datocms-assets.com/77616/1660822248-fpmfs-pt2-input-testing.png?auto=format\u0026dpr=0.75\u0026fm=webp\u0026max-w=600 177w,https://www.datocms-assets.com/77616/1660822248-fpmfs-pt2-input-testing.png?auto=format\u0026fm=webp\u0026max-w=600 237w","sizes":"(max-width: 237px) 100vw, 237px","src":"https://www.datocms-assets.com/77616/1660822248-fpmfs-pt2-input-testing.png?auto=format\u0026max-w=600","alt":null,"title":null,"width":237,"height":115,"aspectRatio":2.0608695652173914}}},{"__typename":"WebmRecord","id":"55258799","video":{"title":"Camera look","alt":"First-person perspective looking around","video":{"muxPlaybackId":"zOikROWk5opml5o012cM1LNnWxvOT4hQv"}}},{"__typename":"WebmRecord","id":"55444906","video":{"title":null,"alt":null,"video":{"muxPlaybackId":"ulVSKAjhokdBArHs01Nyn4zzbMKrADtgB"}}}]}},"isPreview":false},"__N_SSG":true},"page":"/tutorial/[slug]","query":{"slug":"character-movement-from-scratch-pt-2-basic-movement"},"buildId":"FdMC6e8Jf18CHKkiz_cXU","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>